# ğŸš€ iFlytek å¤šæ¨¡æ€é¢è¯•ç³»ç»Ÿ - äº‘æœåŠ¡å™¨éƒ¨ç½²æŒ‡å—

## ğŸ“‹ éƒ¨ç½²æ¦‚è¿°

æœ¬æŒ‡å—å°†å¸®åŠ©ä½ å°†å¤šæ¨¡æ€é¢è¯•ç³»ç»Ÿéƒ¨ç½²åˆ°äº‘æœåŠ¡å™¨ï¼Œå®ç°æ°¸ä¹…åœ¨çº¿è®¿é—®ã€‚æ”¯æŒé˜¿é‡Œäº‘ã€è…¾è®¯äº‘ã€åä¸ºäº‘ç­‰ä¸»æµäº‘æœåŠ¡å•†ã€‚

## ğŸ› ï¸ éƒ¨ç½²æ¶æ„

```
ç”¨æˆ· â†’ åŸŸå/IP â†’ Nginxåå‘ä»£ç† â†’ Vue.jså‰ç«¯ + FastAPIåç«¯ + Redisç¼“å­˜
```

## ğŸ“¦ éƒ¨ç½²æ–¹å¼é€‰æ‹©

### æ–¹å¼ä¸€ï¼šä¸€é”®å¿«é€Ÿéƒ¨ç½²ï¼ˆæ¨èï¼‰
- **é€‚ç”¨åœºæ™¯**ï¼šå¿«é€Ÿæ¼”ç¤ºã€æµ‹è¯•ç¯å¢ƒ
- **éƒ¨ç½²æ—¶é—´**ï¼š10-15åˆ†é’Ÿ
- **æŠ€æœ¯è¦æ±‚**ï¼šåŸºç¡€Linuxæ“ä½œ

### æ–¹å¼äºŒï¼šå®Œæ•´ç”Ÿäº§éƒ¨ç½²
- **é€‚ç”¨åœºæ™¯**ï¼šæ­£å¼ç”Ÿäº§ç¯å¢ƒ
- **éƒ¨ç½²æ—¶é—´**ï¼š30-60åˆ†é’Ÿ
- **æŠ€æœ¯è¦æ±‚**ï¼šç†Ÿæ‚‰Dockerã€Nginxé…ç½®

## ğŸŒŸ æ–¹å¼ä¸€ï¼šä¸€é”®å¿«é€Ÿéƒ¨ç½²

### 1. è´­ä¹°äº‘æœåŠ¡å™¨

#### é˜¿é‡Œäº‘ECSæ¨èé…ç½®
- **å®ä¾‹è§„æ ¼**ï¼šecs.t6-c1m2.largeï¼ˆ2æ ¸4GBï¼‰
- **æ“ä½œç³»ç»Ÿ**ï¼šUbuntu 20.04 LTS
- **å¸¦å®½**ï¼š5Mbps
- **å­˜å‚¨**ï¼š40GB SSD
- **å®‰å…¨ç»„**ï¼šå¼€æ”¾80ã€443ã€22ç«¯å£

#### è…¾è®¯äº‘CVMæ¨èé…ç½®
- **å®ä¾‹è§„æ ¼**ï¼šS5.MEDIUM4ï¼ˆ2æ ¸4GBï¼‰
- **æ“ä½œç³»ç»Ÿ**ï¼šUbuntu Server 20.04 LTS
- **å¸¦å®½**ï¼š5Mbps
- **å­˜å‚¨**ï¼š50GBé«˜æ€§èƒ½äº‘ç¡¬ç›˜
- **å®‰å…¨ç»„**ï¼šå¼€æ”¾80ã€443ã€22ç«¯å£

### 2. è¿æ¥æœåŠ¡å™¨

```bash
# ä½¿ç”¨SSHè¿æ¥æœåŠ¡å™¨
ssh root@your-server-ip

# æˆ–ä½¿ç”¨å¯†é’¥è¿æ¥
ssh -i your-key.pem ubuntu@your-server-ip
```

### 3. ä¸Šä¼ é¡¹ç›®æ–‡ä»¶

```bash
# æ–¹æ³•1ï¼šä½¿ç”¨scpä¸Šä¼ 
scp -r deployment/ root@your-server-ip:/root/

# æ–¹æ³•2ï¼šä½¿ç”¨rsyncä¸Šä¼ 
rsync -avz deployment/ root@your-server-ip:/root/deployment/

# æ–¹æ³•3ï¼šåœ¨æœåŠ¡å™¨ä¸Šç›´æ¥ä¸‹è½½
wget https://github.com/your-repo/archive/main.zip
unzip main.zip
```

### 4. ä¸€é”®éƒ¨ç½²

```bash
# è¿›å…¥éƒ¨ç½²ç›®å½•
cd deployment

# ç»™è„šæœ¬æ‰§è¡Œæƒé™
chmod +x quick-deploy.sh

# è¿è¡Œä¸€é”®éƒ¨ç½²è„šæœ¬
./quick-deploy.sh
```

### 5. é…ç½®iFlytek API

```bash
# ç¼–è¾‘ç¯å¢ƒé…ç½®æ–‡ä»¶
nano .env

# ä¿®æ”¹ä»¥ä¸‹é…ç½®
IFLYTEK_APP_ID=your_app_id_here
IFLYTEK_API_KEY=your_api_key_here
IFLYTEK_API_SECRET=your_api_secret_here
DOMAIN_NAME=your-server-ip
```

### 6. é‡å¯æœåŠ¡

```bash
# é‡å¯æœåŠ¡ä½¿é…ç½®ç”Ÿæ•ˆ
docker-compose restart
```

### 7. è®¿é—®ç³»ç»Ÿ

- **è®¿é—®åœ°å€**ï¼šhttp://your-server-ip
- **ç®¡ç†åå°**ï¼šhttp://your-server-ip/admin
- **APIæ–‡æ¡£**ï¼šhttp://your-server-ip/api/docs

## ğŸ—ï¸ æ–¹å¼äºŒï¼šå®Œæ•´ç”Ÿäº§éƒ¨ç½²

### 1. æœåŠ¡å™¨å‡†å¤‡

#### æ¨èé…ç½®ï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰
- **CPU**ï¼š4æ ¸å¿ƒä»¥ä¸Š
- **å†…å­˜**ï¼š8GBä»¥ä¸Š
- **å­˜å‚¨**ï¼š100GB SSD
- **å¸¦å®½**ï¼š10Mbpsä»¥ä¸Š
- **æ“ä½œç³»ç»Ÿ**ï¼šUbuntu 20.04 LTS / CentOS 8

#### å®‰å…¨ç»„é…ç½®
```bash
# å¼€æ”¾å¿…è¦ç«¯å£
80    # HTTP
443   # HTTPS
22    # SSH
8000  # åç«¯APIï¼ˆå¯é€‰ï¼Œç”¨äºè°ƒè¯•ï¼‰
```

### 2. åŸŸåé…ç½®

#### è´­ä¹°åŸŸå
- é˜¿é‡Œäº‘ï¼šhttps://wanwang.aliyun.com/
- è…¾è®¯äº‘ï¼šhttps://dnspod.cloud.tencent.com/
- Cloudflareï¼šhttps://www.cloudflare.com/

#### DNSè§£æé…ç½®
```
ç±»å‹    ä¸»æœºè®°å½•    è§£æå€¼
A       @          your-server-ip
A       www        your-server-ip
```

### 3. SSLè¯ä¹¦é…ç½®

#### æ–¹æ³•1ï¼šLet's Encryptå…è´¹è¯ä¹¦
```bash
# è¿è¡ŒSSLé…ç½®è„šæœ¬
./deploy.sh --ssl
```

#### æ–¹æ³•2ï¼šä¸Šä¼ è‡ªæœ‰è¯ä¹¦
```bash
# å°†è¯ä¹¦æ–‡ä»¶æ”¾åˆ°æŒ‡å®šç›®å½•
cp your-cert.pem nginx/ssl/cert.pem
cp your-key.pem nginx/ssl/key.pem
```

### 4. å®Œæ•´éƒ¨ç½²

```bash
# åˆå§‹åŒ–éƒ¨ç½²ç¯å¢ƒ
./deploy.sh --init

# ç¼–è¾‘é…ç½®æ–‡ä»¶
nano .env

# æ‰§è¡Œå®Œæ•´éƒ¨ç½²
./deploy.sh
```

## ğŸ”§ éƒ¨ç½²åé…ç½®

### 1. ç³»ç»Ÿç›‘æ§

```bash
# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
docker-compose ps

# æŸ¥çœ‹æœåŠ¡æ—¥å¿—
docker-compose logs -f

# æŸ¥çœ‹ç³»ç»Ÿèµ„æº
docker stats
```

### 2. æ€§èƒ½ä¼˜åŒ–

#### æ•°æ®åº“ä¼˜åŒ–
```bash
# å®šæœŸå¤‡ä»½æ•°æ®åº“
docker-compose exec backend python -c "
import sqlite3
import shutil
shutil.copy('/app/data/interview_system.db', '/app/data/backup.db')
"
```

#### ç¼“å­˜ä¼˜åŒ–
```bash
# æ¸…ç†Redisç¼“å­˜
docker-compose exec redis redis-cli FLUSHALL
```

### 3. å®‰å…¨åŠ å›º

#### é˜²ç«å¢™é…ç½®
```bash
# Ubuntu/Debian
sudo ufw enable
sudo ufw allow 22
sudo ufw allow 80
sudo ufw allow 443

# CentOS/RHEL
sudo firewall-cmd --permanent --add-service=ssh
sudo firewall-cmd --permanent --add-service=http
sudo firewall-cmd --permanent --add-service=https
sudo firewall-cmd --reload
```

#### å®šæœŸæ›´æ–°
```bash
# æ›´æ–°ç³»ç»Ÿ
sudo apt update && sudo apt upgrade -y

# æ›´æ–°åº”ç”¨
./deploy.sh --update
```

## ğŸš¨ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

#### 1. æœåŠ¡å¯åŠ¨å¤±è´¥
```bash
# æŸ¥çœ‹è¯¦ç»†æ—¥å¿—
docker-compose logs backend
docker-compose logs frontend

# é‡å¯æœåŠ¡
docker-compose restart
```

#### 2. ç«¯å£è¢«å ç”¨
```bash
# æŸ¥çœ‹ç«¯å£å ç”¨
sudo netstat -tlnp | grep :80
sudo netstat -tlnp | grep :443

# åœæ­¢å ç”¨ç«¯å£çš„æœåŠ¡
sudo systemctl stop apache2
sudo systemctl stop nginx
```

#### 3. å†…å­˜ä¸è¶³
```bash
# æŸ¥çœ‹å†…å­˜ä½¿ç”¨
free -h

# æ¸…ç†Dockerç¼“å­˜
docker system prune -a
```

#### 4. SSLè¯ä¹¦é—®é¢˜
```bash
# æ£€æŸ¥è¯ä¹¦æœ‰æ•ˆæ€§
openssl x509 -in nginx/ssl/cert.pem -text -noout

# é‡æ–°ç”³è¯·è¯ä¹¦
./deploy.sh --ssl
```

## ğŸ“Š ç›‘æ§å’Œç»´æŠ¤

### 1. æ—¥å¿—ç®¡ç†
```bash
# æŸ¥çœ‹è®¿é—®æ—¥å¿—
docker-compose exec nginx tail -f /var/log/nginx/access.log

# æŸ¥çœ‹é”™è¯¯æ—¥å¿—
docker-compose exec nginx tail -f /var/log/nginx/error.log
```

### 2. å¤‡ä»½ç­–ç•¥
```bash
# åˆ›å»ºå¤‡ä»½è„šæœ¬
cat > backup.sh << 'EOF'
#!/bin/bash
DATE=$(date +%Y%m%d_%H%M%S)
docker-compose exec backend tar -czf /app/data/backup_$DATE.tar.gz /app/data/
EOF

chmod +x backup.sh
```

### 3. è‡ªåŠ¨æ›´æ–°
```bash
# æ·»åŠ åˆ°crontab
crontab -e

# æ¯å¤©å‡Œæ™¨2ç‚¹è‡ªåŠ¨å¤‡ä»½
0 2 * * * /path/to/backup.sh

# æ¯å‘¨æ—¥å‡Œæ™¨3ç‚¹è‡ªåŠ¨æ›´æ–°
0 3 * * 0 /path/to/deploy.sh --update
```

## ğŸ¯ éƒ¨ç½²æˆåŠŸéªŒè¯

### åŠŸèƒ½æµ‹è¯•æ¸…å•
- [ ] é¦–é¡µæ­£å¸¸è®¿é—®
- [ ] ç”¨æˆ·æ³¨å†Œç™»å½•
- [ ] AIé¢è¯•åŠŸèƒ½
- [ ] æ–‡ä»¶ä¸Šä¼ ä¸‹è½½
- [ ] æŠ¥å‘Šç”Ÿæˆå¯¼å‡º
- [ ] å¤šæ¨¡æ€åˆ†æ
- [ ] å“åº”é€Ÿåº¦æµ‹è¯•

### æ€§èƒ½æŒ‡æ ‡
- **é¡µé¢åŠ è½½æ—¶é—´**ï¼š< 3ç§’
- **APIå“åº”æ—¶é—´**ï¼š< 2ç§’
- **å¹¶å‘ç”¨æˆ·æ•°**ï¼š100+
- **ç³»ç»Ÿå¯ç”¨æ€§**ï¼š99.9%

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœåœ¨éƒ¨ç½²è¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜ï¼Œè¯·ï¼š

1. æŸ¥çœ‹æœ¬æ–‡æ¡£çš„æ•…éšœæ’é™¤éƒ¨åˆ†
2. æ£€æŸ¥ç³»ç»Ÿæ—¥å¿—ï¼š`docker-compose logs`
3. ç¡®è®¤é…ç½®æ–‡ä»¶æ­£ç¡®æ€§
4. è”ç³»æŠ€æœ¯æ”¯æŒ

---

**æ­å–œï¼ä½ çš„iFlytekå¤šæ¨¡æ€é¢è¯•ç³»ç»Ÿç°å·²æˆåŠŸéƒ¨ç½²åˆ°äº‘æœåŠ¡å™¨ï¼Œå¯ä»¥æ°¸ä¹…åœ¨çº¿è®¿é—®äº†ï¼** ğŸ‰
