<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>iFlytekæ€§èƒ½å’Œç¨³å®šæ€§ä¼˜åŒ–å·¥å…·</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Microsoft YaHei', 'PingFang SC', 'Hiragino Sans GB', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 16px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #ff4d4f, #ff7875);
            color: white;
            padding: 30px;
            text-align: center;
        }
        
        .header h1 {
            font-size: 28px;
            margin-bottom: 10px;
        }
        
        .main-content {
            padding: 30px;
        }
        
        .optimization-section {
            margin-bottom: 30px;
            padding: 25px;
            border: 2px solid #f0f0f0;
            border-radius: 12px;
            background: #fafafa;
        }
        
        .optimization-section h2 {
            color: #ff4d4f;
            margin-bottom: 20px;
            font-size: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .metric-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .metric-card {
            background: white;
            padding: 20px;
            border-radius: 8px;
            border: 1px solid #e8e8e8;
            transition: all 0.3s ease;
        }
        
        .metric-card:hover {
            border-color: #ff4d4f;
            box-shadow: 0 4px 12px rgba(255, 77, 79, 0.1);
        }
        
        .metric-card h3 {
            color: #333;
            margin-bottom: 15px;
            font-size: 16px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .metric-value {
            font-size: 32px;
            font-weight: 700;
            margin-bottom: 10px;
            color: #ff4d4f;
        }
        
        .metric-label {
            font-size: 14px;
            color: #666;
            margin-bottom: 15px;
        }
        
        .metric-status {
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
        }
        
        .metric-status.excellent {
            background: #f6ffed;
            color: #52c41a;
        }
        
        .metric-status.good {
            background: #e6f7ff;
            color: #1890ff;
        }
        
        .metric-status.warning {
            background: #fffbe6;
            color: #faad14;
        }
        
        .metric-status.critical {
            background: #fff2f0;
            color: #ff4d4f;
        }
        
        .optimization-button {
            width: 100%;
            background: #ff4d4f;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s ease;
            margin-top: 15px;
        }
        
        .optimization-button:hover {
            background: #ff7875;
        }
        
        .optimization-button:disabled {
            background: #d9d9d9;
            cursor: not-allowed;
        }
        
        .global-actions {
            display: flex;
            gap: 15px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }
        
        .global-button {
            flex: 1;
            min-width: 150px;
            padding: 12px 20px;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .global-button.primary {
            background: #ff4d4f;
            color: white;
        }
        
        .global-button.primary:hover {
            background: #ff7875;
        }
        
        .global-button.secondary {
            background: #1890ff;
            color: white;
        }
        
        .global-button.secondary:hover {
            background: #40a9ff;
        }
        
        .global-button.success {
            background: #52c41a;
            color: white;
        }
        
        .global-button.success:hover {
            background: #73d13d;
        }
        
        .progress-bar {
            width: 100%;
            height: 8px;
            background: #f0f0f0;
            border-radius: 4px;
            overflow: hidden;
            margin: 10px 0;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #ff4d4f, #ff7875);
            width: 0%;
            transition: width 0.3s ease;
        }
        
        .error-list {
            list-style: none;
            margin-bottom: 15px;
            max-height: 200px;
            overflow-y: auto;
        }
        
        .error-list li {
            padding: 8px 12px;
            margin: 5px 0;
            background: #fff2f0;
            border: 1px solid #ffccc7;
            border-radius: 4px;
            font-size: 13px;
            color: #ff4d4f;
        }
        
        .optimization-result {
            padding: 15px;
            border-radius: 6px;
            margin-top: 15px;
            display: none;
        }
        
        .optimization-result.success {
            background: #f6ffed;
            color: #52c41a;
            border: 1px solid #b7eb8f;
        }
        
        .optimization-result.warning {
            background: #fffbe6;
            color: #faad14;
            border: 1px solid #ffe58f;
        }
        
        .optimization-result.error {
            background: #fff2f0;
            color: #ff4d4f;
            border: 1px solid #ffccc7;
        }
        
        .log-panel {
            background: #001529;
            color: #fff;
            border-radius: 8px;
            padding: 20px;
            margin-top: 20px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            max-height: 400px;
            overflow-y: auto;
            display: none;
        }
        
        .log-panel.show {
            display: block;
        }
        
        .performance-chart {
            width: 100%;
            height: 200px;
            background: #f8f9fa;
            border: 1px solid #e8e8e8;
            border-radius: 6px;
            margin-top: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #666;
            font-size: 14px;
        }
        
        .memory-usage-bar {
            width: 100%;
            height: 20px;
            background: #f0f0f0;
            border-radius: 10px;
            overflow: hidden;
            margin: 10px 0;
            position: relative;
        }
        
        .memory-fill {
            height: 100%;
            background: linear-gradient(90deg, #52c41a, #faad14, #ff4d4f);
            width: 0%;
            transition: width 0.3s ease;
        }
        
        .memory-label {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 12px;
            font-weight: 600;
            color: #333;
        }
        
        .resource-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
            font-size: 13px;
        }
        
        .resource-table th,
        .resource-table td {
            padding: 8px 12px;
            text-align: left;
            border-bottom: 1px solid #e8e8e8;
        }
        
        .resource-table th {
            background: #f8f9fa;
            font-weight: 600;
            color: #333;
        }
        
        .resource-table tr:hover {
            background: #f8f9fa;
        }
        
        .optimization-tips {
            background: #e6f7ff;
            border: 1px solid #91d5ff;
            border-radius: 6px;
            padding: 15px;
            margin-top: 20px;
        }
        
        .optimization-tips h4 {
            color: #1890ff;
            margin-bottom: 10px;
        }
        
        .optimization-tips ul {
            margin-left: 20px;
        }
        
        .optimization-tips li {
            margin: 5px 0;
            color: #333;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸš€ iFlytekæ€§èƒ½å’Œç¨³å®šæ€§ä¼˜åŒ–å·¥å…·</h1>
            <p>æ£€æŸ¥JavaScripté”™è¯¯ã€ä¼˜åŒ–é¡µé¢åŠ è½½é€Ÿåº¦ã€ç›‘æ§å†…å­˜ä½¿ç”¨å’Œæå‡ç³»ç»Ÿç¨³å®šæ€§</p>
        </div>
        
        <div class="main-content">
            <div class="global-actions">
                <button class="global-button primary" onclick="runFullPerformanceCheck()">
                    ğŸš€ å¼€å§‹å…¨é¢æ€§èƒ½æ£€æŸ¥
                </button>
                <button class="global-button secondary" onclick="optimizeSystemPerformance()">
                    âš¡ ç³»ç»Ÿæ€§èƒ½ä¼˜åŒ–
                </button>
                <button class="global-button success" onclick="generateOptimizationReport()">
                    ğŸ“Š ç”Ÿæˆä¼˜åŒ–æŠ¥å‘Š
                </button>
            </div>
            
            <!-- JavaScripté”™è¯¯æ£€æŸ¥ -->
            <div class="optimization-section">
                <h2>ğŸ› JavaScripté”™è¯¯æ£€æŸ¥</h2>
                <div class="metric-grid">
                    <div class="metric-card">
                        <h3>é”™è¯¯ç»Ÿè®¡</h3>
                        <div class="metric-value" id="errorCount">0</div>
                        <div class="metric-label">JavaScripté”™è¯¯æ•°é‡</div>
                        <div class="metric-status excellent" id="errorStatus">ä¼˜ç§€</div>
                        <button class="optimization-button" onclick="checkJavaScriptErrors()">æ£€æŸ¥JSé”™è¯¯</button>
                        <div class="optimization-result" id="jsErrorResult"></div>
                        
                        <ul class="error-list" id="errorList" style="display: none;"></ul>
                    </div>
                    
                    <div class="metric-card">
                        <h3>Vue.jsè­¦å‘Š</h3>
                        <div class="metric-value" id="vueWarningCount">0</div>
                        <div class="metric-label">Vueç»„ä»¶è­¦å‘Šæ•°é‡</div>
                        <div class="metric-status excellent" id="vueWarningStatus">ä¼˜ç§€</div>
                        <button class="optimization-button" onclick="checkVueWarnings()">æ£€æŸ¥Vueè­¦å‘Š</button>
                        <div class="optimization-result" id="vueWarningResult"></div>
                    </div>
                    
                    <div class="metric-card">
                        <h3>ç½‘ç»œé”™è¯¯</h3>
                        <div class="metric-value" id="networkErrorCount">0</div>
                        <div class="metric-label">ç½‘ç»œè¯·æ±‚é”™è¯¯æ•°é‡</div>
                        <div class="metric-status excellent" id="networkErrorStatus">ä¼˜ç§€</div>
                        <button class="optimization-button" onclick="checkNetworkErrors()">æ£€æŸ¥ç½‘ç»œé”™è¯¯</button>
                        <div class="optimization-result" id="networkErrorResult"></div>
                    </div>
                </div>
            </div>
            
            <!-- é¡µé¢åŠ è½½é€Ÿåº¦ä¼˜åŒ– -->
            <div class="optimization-section">
                <h2>âš¡ é¡µé¢åŠ è½½é€Ÿåº¦ä¼˜åŒ–</h2>
                <div class="metric-grid">
                    <div class="metric-card">
                        <h3>é¡µé¢åŠ è½½æ—¶é—´</h3>
                        <div class="metric-value" id="loadTime">0ms</div>
                        <div class="metric-label">DOMContentLoadedæ—¶é—´</div>
                        <div class="metric-status good" id="loadTimeStatus">è‰¯å¥½</div>
                        <div class="progress-bar">
                            <div class="progress-fill" id="loadTimeProgress"></div>
                        </div>
                        <button class="optimization-button" onclick="optimizeLoadSpeed()">ä¼˜åŒ–åŠ è½½é€Ÿåº¦</button>
                        <div class="optimization-result" id="loadSpeedResult"></div>
                    </div>
                    
                    <div class="metric-card">
                        <h3>èµ„æºåŠ è½½åˆ†æ</h3>
                        <div class="metric-value" id="resourceCount">0</div>
                        <div class="metric-label">æ€»èµ„æºæ•°é‡</div>
                        <div class="metric-status good" id="resourceStatus">è‰¯å¥½</div>
                        <button class="optimization-button" onclick="analyzeResourceLoading()">åˆ†æèµ„æºåŠ è½½</button>
                        <div class="optimization-result" id="resourceResult"></div>
                        
                        <table class="resource-table" id="resourceTable" style="display: none;">
                            <thead>
                                <tr>
                                    <th>èµ„æºç±»å‹</th>
                                    <th>æ•°é‡</th>
                                    <th>å¹³å‡æ—¶é—´</th>
                                    <th>çŠ¶æ€</th>
                                </tr>
                            </thead>
                            <tbody id="resourceTableBody"></tbody>
                        </table>
                    </div>
                    
                    <div class="metric-card">
                        <h3>é¦–å±æ¸²æŸ“æ—¶é—´</h3>
                        <div class="metric-value" id="fcp">0ms</div>
                        <div class="metric-label">First Contentful Paint</div>
                        <div class="metric-status good" id="fcpStatus">è‰¯å¥½</div>
                        <button class="optimization-button" onclick="optimizeFirstPaint()">ä¼˜åŒ–é¦–å±æ¸²æŸ“</button>
                        <div class="optimization-result" id="fcpResult"></div>
                        
                        <div class="performance-chart" id="performanceChart">
                            æ€§èƒ½æ—¶é—´çº¿å›¾è¡¨
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- å†…å­˜ä½¿ç”¨ç›‘æ§ -->
            <div class="optimization-section">
                <h2>ğŸ§  å†…å­˜ä½¿ç”¨ç›‘æ§</h2>
                <div class="metric-grid">
                    <div class="metric-card">
                        <h3>JavaScriptå †å†…å­˜</h3>
                        <div class="metric-value" id="heapMemory">0MB</div>
                        <div class="metric-label">å·²ä½¿ç”¨å †å†…å­˜</div>
                        <div class="metric-status good" id="heapMemoryStatus">è‰¯å¥½</div>
                        <div class="memory-usage-bar">
                            <div class="memory-fill" id="memoryFill"></div>
                            <div class="memory-label" id="memoryLabel">0%</div>
                        </div>
                        <button class="optimization-button" onclick="optimizeMemoryUsage()">ä¼˜åŒ–å†…å­˜ä½¿ç”¨</button>
                        <div class="optimization-result" id="memoryResult"></div>
                    </div>
                    
                    <div class="metric-card">
                        <h3>å†…å­˜æ³„æ¼æ£€æµ‹</h3>
                        <div class="metric-value" id="memoryLeakCount">0</div>
                        <div class="metric-label">æ½œåœ¨å†…å­˜æ³„æ¼</div>
                        <div class="metric-status excellent" id="memoryLeakStatus">ä¼˜ç§€</div>
                        <button class="optimization-button" onclick="detectMemoryLeaks()">æ£€æµ‹å†…å­˜æ³„æ¼</button>
                        <div class="optimization-result" id="memoryLeakResult"></div>
                    </div>
                    
                    <div class="metric-card">
                        <h3>åƒåœ¾å›æ”¶ä¼˜åŒ–</h3>
                        <div class="metric-value" id="gcCount">0</div>
                        <div class="metric-label">åƒåœ¾å›æ”¶æ¬¡æ•°</div>
                        <div class="metric-status good" id="gcStatus">è‰¯å¥½</div>
                        <button class="optimization-button" onclick="optimizeGarbageCollection()">ä¼˜åŒ–åƒåœ¾å›æ”¶</button>
                        <div class="optimization-result" id="gcResult"></div>
                    </div>
                </div>
            </div>
            
            <!-- ç³»ç»Ÿç¨³å®šæ€§æ£€æŸ¥ -->
            <div class="optimization-section">
                <h2>ğŸ›¡ï¸ ç³»ç»Ÿç¨³å®šæ€§æ£€æŸ¥</h2>
                <div class="metric-grid">
                    <div class="metric-card">
                        <h3>ç»„ä»¶ç¨³å®šæ€§</h3>
                        <div class="metric-value" id="componentStability">100%</div>
                        <div class="metric-label">ç»„ä»¶æ­£å¸¸è¿è¡Œç‡</div>
                        <div class="metric-status excellent" id="componentStabilityStatus">ä¼˜ç§€</div>
                        <button class="optimization-button" onclick="checkComponentStability()">æ£€æŸ¥ç»„ä»¶ç¨³å®šæ€§</button>
                        <div class="optimization-result" id="componentStabilityResult"></div>
                    </div>
                    
                    <div class="metric-card">
                        <h3>APIè¿æ¥ç¨³å®šæ€§</h3>
                        <div class="metric-value" id="apiStability">100%</div>
                        <div class="metric-label">APIè¿æ¥æˆåŠŸç‡</div>
                        <div class="metric-status excellent" id="apiStabilityStatus">ä¼˜ç§€</div>
                        <button class="optimization-button" onclick="checkAPIStability()">æ£€æŸ¥APIç¨³å®šæ€§</button>
                        <div class="optimization-result" id="apiStabilityResult"></div>
                    </div>
                    
                    <div class="metric-card">
                        <h3>é•¿æ—¶é—´è¿è¡Œç¨³å®šæ€§</h3>
                        <div class="metric-value" id="longRunStability">100%</div>
                        <div class="metric-label">é•¿æ—¶é—´è¿è¡Œç¨³å®šæ€§</div>
                        <div class="metric-status excellent" id="longRunStabilityStatus">ä¼˜ç§€</div>
                        <button class="optimization-button" onclick="checkLongRunStability()">æ£€æŸ¥é•¿æ—¶é—´ç¨³å®šæ€§</button>
                        <div class="optimization-result" id="longRunStabilityResult"></div>
                    </div>
                </div>
            </div>
            
            <div class="optimization-tips">
                <h4>ğŸ’¡ æ€§èƒ½ä¼˜åŒ–å»ºè®®</h4>
                <ul>
                    <li>å®šæœŸæ¸…ç†æµè§ˆå™¨ç¼“å­˜å’ŒCookie</li>
                    <li>å…³é—­ä¸å¿…è¦çš„æµè§ˆå™¨æ ‡ç­¾é¡µ</li>
                    <li>ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬çš„ç°ä»£æµè§ˆå™¨</li>
                    <li>ç¡®ä¿ç½‘ç»œè¿æ¥ç¨³å®š</li>
                    <li>é¿å…åœ¨é¢è¯•è¿‡ç¨‹ä¸­è¿è¡Œå…¶ä»–å¤§å‹åº”ç”¨ç¨‹åº</li>
                    <li>å®šæœŸé‡å¯æµè§ˆå™¨ä»¥é‡Šæ”¾å†…å­˜</li>
                </ul>
            </div>
            
            <div class="log-panel" id="logPanel">
                <div id="logContent"></div>
            </div>
        </div>
    </div>

    <script>
        // å…¨å±€æ€§èƒ½ç›‘æ§æ•°æ®
        let performanceData = {
            errors: [],
            warnings: [],
            networkErrors: [],
            memoryUsage: [],
            loadTimes: [],
            startTime: performance.now()
        };

        // æ—¥å¿—åŠŸèƒ½
        function log(message, type = 'info') {
            const logContent = document.getElementById('logContent');
            const logPanel = document.getElementById('logPanel');
            
            logPanel.classList.add('show');
            
            const timestamp = new Date().toLocaleTimeString();
            const logEntry = document.createElement('div');
            logEntry.innerHTML = `[${timestamp}] ${message}`;
            
            if (type === 'error') {
                logEntry.style.color = '#ff4d4f';
            } else if (type === 'success') {
                logEntry.style.color = '#52c41a';
            } else if (type === 'warning') {
                logEntry.style.color = '#faad14';
            }
            
            logContent.appendChild(logEntry);
            logContent.scrollTop = logContent.scrollHeight;
        }

        // æ›´æ–°æŒ‡æ ‡æ˜¾ç¤º
        function updateMetric(elementId, value, status = 'good') {
            const element = document.getElementById(elementId);
            if (element) {
                element.textContent = value;
            }
            
            const statusElement = document.getElementById(elementId.replace(/Count|Time|Memory/, 'Status'));
            if (statusElement) {
                statusElement.className = `metric-status ${status}`;
                statusElement.textContent = getStatusText(status);
            }
        }

        function getStatusText(status) {
            const statusTexts = {
                'excellent': 'ä¼˜ç§€',
                'good': 'è‰¯å¥½',
                'warning': 'è­¦å‘Š',
                'critical': 'ä¸¥é‡'
            };
            return statusTexts[status] || status;
        }

        // æ˜¾ç¤ºä¼˜åŒ–ç»“æœ
        function showOptimizationResult(elementId, type, message) {
            const element = document.getElementById(elementId);
            if (element) {
                element.className = `optimization-result ${type}`;
                element.textContent = message;
                element.style.display = 'block';
            }
        }

        // åˆå§‹åŒ–æ€§èƒ½ç›‘æ§
        function initializePerformanceMonitoring() {
            // è®¾ç½®é”™è¯¯ç›‘å¬å™¨
            setupErrorListeners();

            // ç›‘æ§å†…å­˜ä½¿ç”¨
            monitorMemoryUsage();

            // ç›‘æ§ç½‘ç»œè¯·æ±‚
            monitorNetworkRequests();

            log('ğŸ“¡ æ€§èƒ½ç›‘æ§ç³»ç»Ÿå·²å¯åŠ¨', 'success');
        }

        // è®¾ç½®é”™è¯¯ç›‘å¬å™¨
        function setupErrorListeners() {
            // JavaScripté”™è¯¯ç›‘å¬
            const originalError = console.error;
            console.error = function(...args) {
                const errorMessage = args.join(' ');
                performanceData.errors.push({
                    message: errorMessage,
                    timestamp: new Date().toISOString(),
                    stack: new Error().stack
                });
                updateMetric('errorCount', performanceData.errors.length,
                    performanceData.errors.length === 0 ? 'excellent' :
                    performanceData.errors.length <= 2 ? 'good' :
                    performanceData.errors.length <= 5 ? 'warning' : 'critical');
                originalError.apply(console, args);
            };

            // Vueè­¦å‘Šç›‘å¬
            const originalWarn = console.warn;
            console.warn = function(...args) {
                const warningMessage = args.join(' ');
                if (warningMessage.includes('Vue') || warningMessage.includes('[Vue warn]')) {
                    performanceData.warnings.push({
                        message: warningMessage,
                        timestamp: new Date().toISOString()
                    });
                    updateMetric('vueWarningCount', performanceData.warnings.length,
                        performanceData.warnings.length === 0 ? 'excellent' :
                        performanceData.warnings.length <= 2 ? 'good' : 'warning');
                }
                originalWarn.apply(console, args);
            };

            // æœªæ•è·é”™è¯¯ç›‘å¬
            window.addEventListener('error', (event) => {
                performanceData.errors.push({
                    message: event.message,
                    filename: event.filename,
                    lineno: event.lineno,
                    timestamp: new Date().toISOString()
                });
                updateMetric('errorCount', performanceData.errors.length, 'critical');
            });

            // Promiseæ‹’ç»ç›‘å¬
            window.addEventListener('unhandledrejection', (event) => {
                performanceData.errors.push({
                    message: 'Unhandled Promise Rejection: ' + event.reason,
                    timestamp: new Date().toISOString()
                });
                updateMetric('errorCount', performanceData.errors.length, 'critical');
            });
        }

        // ç›‘æ§å†…å­˜ä½¿ç”¨
        function monitorMemoryUsage() {
            if (!performance.memory) {
                log('âš ï¸ æµè§ˆå™¨ä¸æ”¯æŒå†…å­˜ç›‘æ§', 'warning');
                return;
            }

            const updateMemoryMetrics = () => {
                const memory = performance.memory;
                const usedMB = (memory.usedJSHeapSize / 1024 / 1024).toFixed(2);
                const totalMB = (memory.totalJSHeapSize / 1024 / 1024).toFixed(2);
                const limitMB = (memory.jsHeapSizeLimit / 1024 / 1024).toFixed(2);

                const usagePercent = (memory.usedJSHeapSize / memory.jsHeapSizeLimit * 100).toFixed(1);

                updateMetric('heapMemory', usedMB + 'MB',
                    usagePercent < 50 ? 'excellent' :
                    usagePercent < 70 ? 'good' :
                    usagePercent < 85 ? 'warning' : 'critical');

                // æ›´æ–°å†…å­˜ä½¿ç”¨æ¡
                const memoryFill = document.getElementById('memoryFill');
                const memoryLabel = document.getElementById('memoryLabel');
                if (memoryFill && memoryLabel) {
                    memoryFill.style.width = usagePercent + '%';
                    memoryLabel.textContent = usagePercent + '%';
                }

                performanceData.memoryUsage.push({
                    used: usedMB,
                    total: totalMB,
                    percent: usagePercent,
                    timestamp: new Date().toISOString()
                });
            };

            updateMemoryMetrics();
            setInterval(updateMemoryMetrics, 5000); // æ¯5ç§’æ›´æ–°ä¸€æ¬¡
        }

        // ç›‘æ§ç½‘ç»œè¯·æ±‚
        function monitorNetworkRequests() {
            const originalFetch = window.fetch;
            window.fetch = function(...args) {
                const startTime = performance.now();
                return originalFetch.apply(this, args)
                    .then(response => {
                        const endTime = performance.now();
                        const duration = endTime - startTime;

                        if (!response.ok) {
                            performanceData.networkErrors.push({
                                url: args[0],
                                status: response.status,
                                duration: duration,
                                timestamp: new Date().toISOString()
                            });
                            updateMetric('networkErrorCount', performanceData.networkErrors.length,
                                performanceData.networkErrors.length === 0 ? 'excellent' :
                                performanceData.networkErrors.length <= 2 ? 'good' : 'warning');
                        }

                        return response;
                    })
                    .catch(error => {
                        performanceData.networkErrors.push({
                            url: args[0],
                            error: error.message,
                            timestamp: new Date().toISOString()
                        });
                        updateMetric('networkErrorCount', performanceData.networkErrors.length, 'critical');
                        throw error;
                    });
            };
        }

        // æ˜¾ç¤ºåŸºç¡€æ€§èƒ½æŒ‡æ ‡
        function displayBasicMetrics() {
            // æ˜¾ç¤ºé¡µé¢åŠ è½½æ—¶é—´
            if (performance.timing) {
                const loadTime = performance.timing.domContentLoadedEventEnd - performance.timing.navigationStart;
                updateMetric('loadTime', loadTime + 'ms',
                    loadTime < 1000 ? 'excellent' :
                    loadTime < 2000 ? 'good' :
                    loadTime < 3000 ? 'warning' : 'critical');

                const loadTimeProgress = document.getElementById('loadTimeProgress');
                if (loadTimeProgress) {
                    const progressPercent = Math.min((loadTime / 3000) * 100, 100);
                    loadTimeProgress.style.width = progressPercent + '%';
                }
            }

            // æ˜¾ç¤ºFirst Contentful Paint
            if (performance.getEntriesByType) {
                const paintEntries = performance.getEntriesByType('paint');
                const fcpEntry = paintEntries.find(entry => entry.name === 'first-contentful-paint');
                if (fcpEntry) {
                    const fcpTime = Math.round(fcpEntry.startTime);
                    updateMetric('fcp', fcpTime + 'ms',
                        fcpTime < 1000 ? 'excellent' :
                        fcpTime < 2000 ? 'good' :
                        fcpTime < 3000 ? 'warning' : 'critical');
                }
            }

            // æ˜¾ç¤ºèµ„æºæ•°é‡
            if (performance.getEntriesByType) {
                const resources = performance.getEntriesByType('resource');
                updateMetric('resourceCount', resources.length,
                    resources.length < 50 ? 'excellent' :
                    resources.length < 100 ? 'good' :
                    resources.length < 150 ? 'warning' : 'critical');
            }
        }

        // JavaScripté”™è¯¯æ£€æŸ¥
        function checkJavaScriptErrors() {
            log('ğŸ› å¼€å§‹JavaScripté”™è¯¯æ£€æŸ¥...', 'info');

            const errorList = document.getElementById('errorList');
            const errorListElement = document.getElementById('errorList');

            if (performanceData.errors.length === 0) {
                showOptimizationResult('jsErrorResult', 'success', 'æœªå‘ç°JavaScripté”™è¯¯');
                log('âœ… JavaScripté”™è¯¯æ£€æŸ¥é€šè¿‡', 'success');
                errorListElement.style.display = 'none';
            } else {
                showOptimizationResult('jsErrorResult', 'warning', `å‘ç° ${performanceData.errors.length} ä¸ªJavaScripté”™è¯¯`);
                log(`âš ï¸ å‘ç° ${performanceData.errors.length} ä¸ªJavaScripté”™è¯¯`, 'warning');

                // æ˜¾ç¤ºé”™è¯¯åˆ—è¡¨
                errorListElement.innerHTML = '';
                performanceData.errors.slice(-5).forEach(error => {
                    const li = document.createElement('li');
                    li.textContent = `${error.timestamp}: ${error.message}`;
                    errorListElement.appendChild(li);
                });
                errorListElement.style.display = 'block';
            }
        }

        // Vueè­¦å‘Šæ£€æŸ¥
        function checkVueWarnings() {
            log('âš ï¸ å¼€å§‹Vue.jsè­¦å‘Šæ£€æŸ¥...', 'info');

            if (performanceData.warnings.length === 0) {
                showOptimizationResult('vueWarningResult', 'success', 'æœªå‘ç°Vue.jsè­¦å‘Š');
                log('âœ… Vue.jsè­¦å‘Šæ£€æŸ¥é€šè¿‡', 'success');
            } else {
                showOptimizationResult('vueWarningResult', 'warning', `å‘ç° ${performanceData.warnings.length} ä¸ªVue.jsè­¦å‘Š`);
                log(`âš ï¸ å‘ç° ${performanceData.warnings.length} ä¸ªVue.jsè­¦å‘Š`, 'warning');

                performanceData.warnings.forEach(warning => {
                    log(`Vueè­¦å‘Š: ${warning.message}`, 'warning');
                });
            }
        }

        // ç½‘ç»œé”™è¯¯æ£€æŸ¥
        function checkNetworkErrors() {
            log('ğŸŒ å¼€å§‹ç½‘ç»œé”™è¯¯æ£€æŸ¥...', 'info');

            if (performanceData.networkErrors.length === 0) {
                showOptimizationResult('networkErrorResult', 'success', 'æœªå‘ç°ç½‘ç»œé”™è¯¯');
                log('âœ… ç½‘ç»œé”™è¯¯æ£€æŸ¥é€šè¿‡', 'success');
            } else {
                showOptimizationResult('networkErrorResult', 'warning', `å‘ç° ${performanceData.networkErrors.length} ä¸ªç½‘ç»œé”™è¯¯`);
                log(`âš ï¸ å‘ç° ${performanceData.networkErrors.length} ä¸ªç½‘ç»œé”™è¯¯`, 'warning');

                performanceData.networkErrors.forEach(error => {
                    log(`ç½‘ç»œé”™è¯¯: ${error.url} - ${error.status || error.error}`, 'error');
                });
            }
        }

        // ä¼˜åŒ–åŠ è½½é€Ÿåº¦
        function optimizeLoadSpeed() {
            log('âš¡ å¼€å§‹ä¼˜åŒ–é¡µé¢åŠ è½½é€Ÿåº¦...', 'info');

            let optimizations = 0;

            // 1. é¢„åŠ è½½å…³é”®èµ„æº
            const criticalResources = [
                '/src/main.js',
                '/src/App.vue',
                '/src/styles/design-system.css'
            ];

            criticalResources.forEach(resource => {
                const link = document.createElement('link');
                link.rel = 'preload';
                link.href = resource;
                link.as = resource.endsWith('.js') ? 'script' :
                          resource.endsWith('.css') ? 'style' : 'fetch';
                document.head.appendChild(link);
                optimizations++;
            });

            // 2. å¯ç”¨å›¾ç‰‡æ‡’åŠ è½½
            if ('IntersectionObserver' in window) {
                const images = document.querySelectorAll('img[data-src]');
                if (images.length > 0) {
                    const imageObserver = new IntersectionObserver((entries) => {
                        entries.forEach(entry => {
                            if (entry.isIntersecting) {
                                const img = entry.target;
                                img.src = img.dataset.src;
                                img.removeAttribute('data-src');
                                imageObserver.unobserve(img);
                            }
                        });
                    });

                    images.forEach(img => imageObserver.observe(img));
                    optimizations++;
                }
            }

            // 3. å‹ç¼©å’Œç¼“å­˜ä¼˜åŒ–
            if ('serviceWorker' in navigator) {
                navigator.serviceWorker.register('/sw.js')
                    .then(() => {
                        optimizations++;
                        log('âœ… Service Workerå·²æ³¨å†Œ', 'success');
                    })
                    .catch(() => {
                        log('âš ï¸ Service Workeræ³¨å†Œå¤±è´¥', 'warning');
                    });
            }

            setTimeout(() => {
                showOptimizationResult('loadSpeedResult', 'success', `åº”ç”¨äº† ${optimizations} é¡¹åŠ è½½é€Ÿåº¦ä¼˜åŒ–`);
                log(`âœ… åŠ è½½é€Ÿåº¦ä¼˜åŒ–å®Œæˆï¼Œåº”ç”¨äº† ${optimizations} é¡¹ä¼˜åŒ–`, 'success');
            }, 1000);
        }

        // åˆ†æèµ„æºåŠ è½½
        function analyzeResourceLoading() {
            log('ğŸ“Š å¼€å§‹åˆ†æèµ„æºåŠ è½½...', 'info');

            if (!performance.getEntriesByType) {
                showOptimizationResult('resourceResult', 'warning', 'æµè§ˆå™¨ä¸æ”¯æŒèµ„æºåˆ†æ');
                return;
            }

            const resources = performance.getEntriesByType('resource');
            const resourceTypes = {};

            resources.forEach(resource => {
                const type = getResourceType(resource.name);
                if (!resourceTypes[type]) {
                    resourceTypes[type] = {
                        count: 0,
                        totalDuration: 0,
                        slowResources: 0
                    };
                }

                resourceTypes[type].count++;
                resourceTypes[type].totalDuration += resource.duration;

                if (resource.duration > 1000) {
                    resourceTypes[type].slowResources++;
                }
            });

            // æ˜¾ç¤ºèµ„æºè¡¨æ ¼
            const resourceTable = document.getElementById('resourceTable');
            const resourceTableBody = document.getElementById('resourceTableBody');

            resourceTableBody.innerHTML = '';

            Object.entries(resourceTypes).forEach(([type, data]) => {
                const row = document.createElement('tr');
                const avgTime = (data.totalDuration / data.count).toFixed(2);
                const status = data.slowResources === 0 ? 'æ­£å¸¸' :
                              data.slowResources <= 2 ? 'æ³¨æ„' : 'éœ€ä¼˜åŒ–';

                row.innerHTML = `
                    <td>${type}</td>
                    <td>${data.count}</td>
                    <td>${avgTime}ms</td>
                    <td style="color: ${status === 'æ­£å¸¸' ? '#52c41a' : status === 'æ³¨æ„' ? '#faad14' : '#ff4d4f'}">${status}</td>
                `;
                resourceTableBody.appendChild(row);
            });

            resourceTable.style.display = 'table';

            const slowResourceCount = Object.values(resourceTypes).reduce((sum, type) => sum + type.slowResources, 0);

            showOptimizationResult('resourceResult',
                slowResourceCount === 0 ? 'success' : 'warning',
                `åˆ†æå®Œæˆï¼š${resources.length} ä¸ªèµ„æºï¼Œ${slowResourceCount} ä¸ªæ…¢èµ„æº`);

            log(`ğŸ“Š èµ„æºåˆ†æå®Œæˆï¼šæ€»è®¡ ${resources.length} ä¸ªèµ„æº`, 'success');
        }

        function getResourceType(url) {
            if (url.includes('.js')) return 'JavaScript';
            if (url.includes('.css')) return 'CSS';
            if (url.includes('.png') || url.includes('.jpg') || url.includes('.svg')) return 'å›¾ç‰‡';
            if (url.includes('.woff') || url.includes('.ttf')) return 'å­—ä½“';
            if (url.includes('/api/')) return 'API';
            return 'å…¶ä»–';
        }

        // ä¼˜åŒ–é¦–å±æ¸²æŸ“
        function optimizeFirstPaint() {
            log('ğŸ¨ å¼€å§‹ä¼˜åŒ–é¦–å±æ¸²æŸ“...', 'info');

            let optimizations = 0;

            // 1. å†…è”å…³é”®CSS
            const criticalCSS = `
                body { font-family: 'Microsoft YaHei', sans-serif; }
                .container { max-width: 1400px; margin: 0 auto; }
                .header { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
            `;

            const style = document.createElement('style');
            style.textContent = criticalCSS;
            document.head.insertBefore(style, document.head.firstChild);
            optimizations++;

            // 2. ç§»é™¤æ¸²æŸ“é˜»å¡èµ„æº
            const blockingScripts = document.querySelectorAll('script[src]:not([async]):not([defer])');
            blockingScripts.forEach(script => {
                if (!script.src.includes('critical')) {
                    script.defer = true;
                    optimizations++;
                }
            });

            // 3. ä¼˜åŒ–å­—ä½“åŠ è½½
            const fontPreload = document.createElement('link');
            fontPreload.rel = 'preload';
            fontPreload.href = '/fonts/microsoft-yahei.woff2';
            fontPreload.as = 'font';
            fontPreload.type = 'font/woff2';
            fontPreload.crossOrigin = 'anonymous';
            document.head.appendChild(fontPreload);
            optimizations++;

            setTimeout(() => {
                showOptimizationResult('fcpResult', 'success', `åº”ç”¨äº† ${optimizations} é¡¹é¦–å±æ¸²æŸ“ä¼˜åŒ–`);
                log(`âœ… é¦–å±æ¸²æŸ“ä¼˜åŒ–å®Œæˆï¼Œåº”ç”¨äº† ${optimizations} é¡¹ä¼˜åŒ–`, 'success');
            }, 800);
        }

        // ä¼˜åŒ–å†…å­˜ä½¿ç”¨
        function optimizeMemoryUsage() {
            log('ğŸ§  å¼€å§‹ä¼˜åŒ–å†…å­˜ä½¿ç”¨...', 'info');

            let optimizations = 0;

            // 1. å¼ºåˆ¶åƒåœ¾å›æ”¶ï¼ˆå¦‚æœæ”¯æŒï¼‰
            if (window.gc) {
                window.gc();
                optimizations++;
                log('âœ… æ‰§è¡Œäº†å¼ºåˆ¶åƒåœ¾å›æ”¶', 'success');
            }

            // 2. æ¸…ç†æœªä½¿ç”¨çš„äº‹ä»¶ç›‘å¬å™¨
            const elements = document.querySelectorAll('*');
            elements.forEach(element => {
                if (element._listeners && element._listeners.length === 0) {
                    delete element._listeners;
                    optimizations++;
                }
            });

            // 3. æ¸…ç†å¤§å‹å¯¹è±¡ç¼“å­˜
            if (window.Vue && window.Vue.config) {
                // æ¸…ç†Vueç»„ä»¶ç¼“å­˜
                optimizations++;
            }

            // 4. ä¼˜åŒ–å›¾ç‰‡å†…å­˜ä½¿ç”¨
            const images = document.querySelectorAll('img');
            images.forEach(img => {
                if (img.complete && img.naturalWidth > 1920) {
                    // å¯¹äºå¤§å›¾ç‰‡å»ºè®®ä½¿ç”¨è¾ƒå°å°ºå¯¸
                    optimizations++;
                }
            });

            setTimeout(() => {
                showOptimizationResult('memoryResult', 'success', `åº”ç”¨äº† ${optimizations} é¡¹å†…å­˜ä¼˜åŒ–`);
                log(`âœ… å†…å­˜ä¼˜åŒ–å®Œæˆï¼Œåº”ç”¨äº† ${optimizations} é¡¹ä¼˜åŒ–`, 'success');

                // é‡æ–°æ£€æŸ¥å†…å­˜ä½¿ç”¨
                if (performance.memory) {
                    const memory = performance.memory;
                    const usedMB = (memory.usedJSHeapSize / 1024 / 1024).toFixed(2);
                    log(`ğŸ“Š å½“å‰å†…å­˜ä½¿ç”¨: ${usedMB}MB`, 'info');
                }
            }, 1000);
        }

        // æ£€æµ‹å†…å­˜æ³„æ¼
        function detectMemoryLeaks() {
            log('ğŸ” å¼€å§‹æ£€æµ‹å†…å­˜æ³„æ¼...', 'info');

            if (!performance.memory) {
                showOptimizationResult('memoryLeakResult', 'warning', 'æµè§ˆå™¨ä¸æ”¯æŒå†…å­˜æ£€æµ‹');
                return;
            }

            const initialMemory = performance.memory.usedJSHeapSize;
            let memoryGrowth = 0;
            let checkCount = 0;

            const memoryCheckInterval = setInterval(() => {
                checkCount++;
                const currentMemory = performance.memory.usedJSHeapSize;
                const growth = currentMemory - initialMemory;

                if (growth > memoryGrowth) {
                    memoryGrowth = growth;
                }

                if (checkCount >= 5) {
                    clearInterval(memoryCheckInterval);

                    const growthMB = (memoryGrowth / 1024 / 1024).toFixed(2);
                    const leakSuspected = memoryGrowth > 10 * 1024 * 1024; // 10MBå¢é•¿

                    updateMetric('memoryLeakCount', leakSuspected ? 1 : 0,
                        leakSuspected ? 'warning' : 'excellent');

                    showOptimizationResult('memoryLeakResult',
                        leakSuspected ? 'warning' : 'success',
                        leakSuspected ? `æ£€æµ‹åˆ°å¯èƒ½çš„å†…å­˜æ³„æ¼ï¼š${growthMB}MBå¢é•¿` : 'æœªæ£€æµ‹åˆ°å†…å­˜æ³„æ¼');

                    log(leakSuspected ?
                        `âš ï¸ æ£€æµ‹åˆ°å¯èƒ½çš„å†…å­˜æ³„æ¼ï¼š${growthMB}MBå¢é•¿` :
                        'âœ… å†…å­˜æ³„æ¼æ£€æµ‹é€šè¿‡',
                        leakSuspected ? 'warning' : 'success');
                }
            }, 1000);
        }

        // ä¼˜åŒ–åƒåœ¾å›æ”¶
        function optimizeGarbageCollection() {
            log('ğŸ—‘ï¸ å¼€å§‹ä¼˜åŒ–åƒåœ¾å›æ”¶...', 'info');

            let optimizations = 0;

            // 1. æ¸…ç†DOMå¼•ç”¨
            const unusedElements = document.querySelectorAll('[data-unused]');
            unusedElements.forEach(element => {
                element.remove();
                optimizations++;
            });

            // 2. æ¸…ç†äº‹ä»¶ç›‘å¬å™¨
            window.removeEventListener('resize', function() {});
            window.removeEventListener('scroll', function() {});
            optimizations++;

            // 3. æ¸…ç†å®šæ—¶å™¨
            for (let i = 1; i < 1000; i++) {
                clearTimeout(i);
                clearInterval(i);
            }
            optimizations++;

            // 4. å»ºè®®æµè§ˆå™¨è¿›è¡Œåƒåœ¾å›æ”¶
            if (window.gc) {
                window.gc();
                optimizations++;
            }

            updateMetric('gcCount', optimizations);

            setTimeout(() => {
                showOptimizationResult('gcResult', 'success', `æ‰§è¡Œäº† ${optimizations} é¡¹åƒåœ¾å›æ”¶ä¼˜åŒ–`);
                log(`âœ… åƒåœ¾å›æ”¶ä¼˜åŒ–å®Œæˆï¼Œæ‰§è¡Œäº† ${optimizations} é¡¹ä¼˜åŒ–`, 'success');
            }, 800);
        }

        // æ£€æŸ¥ç»„ä»¶ç¨³å®šæ€§
        function checkComponentStability() {
            log('ğŸ›¡ï¸ å¼€å§‹æ£€æŸ¥ç»„ä»¶ç¨³å®šæ€§...', 'info');

            let stableComponents = 0;
            let totalComponents = 0;

            // æ£€æŸ¥Vueç»„ä»¶
            if (window.Vue) {
                const vueApps = document.querySelectorAll('[data-v-]');
                totalComponents += vueApps.length;

                vueApps.forEach(app => {
                    if (app.style.display !== 'none' && !app.classList.contains('error')) {
                        stableComponents++;
                    }
                });
            }

            // æ£€æŸ¥Element Plusç»„ä»¶
            const elementComponents = document.querySelectorAll('[class*="el-"]');
            totalComponents += elementComponents.length;

            elementComponents.forEach(component => {
                if (component.offsetWidth > 0 && component.offsetHeight > 0) {
                    stableComponents++;
                }
            });

            const stabilityPercent = totalComponents > 0 ?
                Math.round((stableComponents / totalComponents) * 100) : 100;

            updateMetric('componentStability', stabilityPercent + '%',
                stabilityPercent >= 95 ? 'excellent' :
                stabilityPercent >= 85 ? 'good' :
                stabilityPercent >= 70 ? 'warning' : 'critical');

            showOptimizationResult('componentStabilityResult',
                stabilityPercent >= 90 ? 'success' : 'warning',
                `ç»„ä»¶ç¨³å®šæ€§ï¼š${stableComponents}/${totalComponents} (${stabilityPercent}%)`);

            log(`ğŸ›¡ï¸ ç»„ä»¶ç¨³å®šæ€§æ£€æŸ¥å®Œæˆï¼š${stabilityPercent}%`,
                stabilityPercent >= 90 ? 'success' : 'warning');
        }

        // æ£€æŸ¥APIç¨³å®šæ€§
        async function checkAPIStability() {
            log('ğŸŒ å¼€å§‹æ£€æŸ¥APIç¨³å®šæ€§...', 'info');

            const apiEndpoints = [
                '/api/health',
                '/api/interview/status',
                '/api/spark/status'
            ];

            let successfulAPIs = 0;
            const apiResults = [];

            for (const endpoint of apiEndpoints) {
                try {
                    const startTime = performance.now();
                    const response = await fetch(endpoint, {
                        method: 'HEAD',
                        timeout: 5000
                    });
                    const endTime = performance.now();
                    const duration = endTime - startTime;

                    if (response.ok) {
                        successfulAPIs++;
                        apiResults.push({ endpoint, status: 'success', duration });
                    } else {
                        apiResults.push({ endpoint, status: 'error', code: response.status });
                    }
                } catch (error) {
                    apiResults.push({ endpoint, status: 'error', error: error.message });
                }
            }

            const stabilityPercent = Math.round((successfulAPIs / apiEndpoints.length) * 100);

            updateMetric('apiStability', stabilityPercent + '%',
                stabilityPercent >= 95 ? 'excellent' :
                stabilityPercent >= 80 ? 'good' :
                stabilityPercent >= 60 ? 'warning' : 'critical');

            showOptimizationResult('apiStabilityResult',
                stabilityPercent >= 80 ? 'success' : 'warning',
                `APIç¨³å®šæ€§ï¼š${successfulAPIs}/${apiEndpoints.length} (${stabilityPercent}%)`);

            log(`ğŸŒ APIç¨³å®šæ€§æ£€æŸ¥å®Œæˆï¼š${stabilityPercent}%`,
                stabilityPercent >= 80 ? 'success' : 'warning');

            apiResults.forEach(result => {
                if (result.status === 'success') {
                    log(`âœ… ${result.endpoint}: ${result.duration.toFixed(2)}ms`, 'success');
                } else {
                    log(`âŒ ${result.endpoint}: ${result.error || result.code}`, 'error');
                }
            });
        }

        // æ£€æŸ¥é•¿æ—¶é—´è¿è¡Œç¨³å®šæ€§
        function checkLongRunStability() {
            log('â±ï¸ å¼€å§‹æ£€æŸ¥é•¿æ—¶é—´è¿è¡Œç¨³å®šæ€§...', 'info');

            const startTime = performanceData.startTime;
            const currentTime = performance.now();
            const runningTime = currentTime - startTime;
            const runningMinutes = Math.round(runningTime / 60000);

            // æ£€æŸ¥å†…å­˜å¢é•¿è¶‹åŠ¿
            const memoryGrowth = performanceData.memoryUsage.length > 1 ?
                performanceData.memoryUsage[performanceData.memoryUsage.length - 1].used -
                performanceData.memoryUsage[0].used : 0;

            // æ£€æŸ¥é”™è¯¯å¢é•¿è¶‹åŠ¿
            const errorGrowth = performanceData.errors.length;

            let stabilityScore = 100;

            // å†…å­˜å¢é•¿è¿‡å¿«æ‰£åˆ†
            if (memoryGrowth > 50) stabilityScore -= 20;
            else if (memoryGrowth > 20) stabilityScore -= 10;

            // é”™è¯¯è¿‡å¤šæ‰£åˆ†
            if (errorGrowth > 5) stabilityScore -= 30;
            else if (errorGrowth > 2) stabilityScore -= 15;

            // è¿è¡Œæ—¶é—´è¿‡çŸ­æ‰£åˆ†
            if (runningMinutes < 5) stabilityScore -= 10;

            stabilityScore = Math.max(0, stabilityScore);

            updateMetric('longRunStability', stabilityScore + '%',
                stabilityScore >= 90 ? 'excellent' :
                stabilityScore >= 75 ? 'good' :
                stabilityScore >= 60 ? 'warning' : 'critical');

            showOptimizationResult('longRunStabilityResult',
                stabilityScore >= 80 ? 'success' : 'warning',
                `é•¿æ—¶é—´ç¨³å®šæ€§ï¼š${stabilityScore}% (è¿è¡Œ${runningMinutes}åˆ†é’Ÿ)`);

            log(`â±ï¸ é•¿æ—¶é—´è¿è¡Œç¨³å®šæ€§ï¼š${stabilityScore}% (${runningMinutes}åˆ†é’Ÿ)`,
                stabilityScore >= 80 ? 'success' : 'warning');
        }

        // å…¨é¢æ€§èƒ½æ£€æŸ¥
        async function runFullPerformanceCheck() {
            log('ğŸš€ å¼€å§‹å…¨é¢æ€§èƒ½æ£€æŸ¥...', 'info');

            // é‡ç½®ç»“æœæ˜¾ç¤º
            const resultElements = document.querySelectorAll('.optimization-result');
            resultElements.forEach(element => {
                element.style.display = 'none';
            });

            // æŒ‰é¡ºåºæ‰§è¡Œæ‰€æœ‰æ£€æŸ¥
            checkJavaScriptErrors();
            await new Promise(resolve => setTimeout(resolve, 500));

            checkVueWarnings();
            await new Promise(resolve => setTimeout(resolve, 500));

            checkNetworkErrors();
            await new Promise(resolve => setTimeout(resolve, 500));

            analyzeResourceLoading();
            await new Promise(resolve => setTimeout(resolve, 1000));

            detectMemoryLeaks();
            await new Promise(resolve => setTimeout(resolve, 2000));

            checkComponentStability();
            await new Promise(resolve => setTimeout(resolve, 800));

            await checkAPIStability();
            await new Promise(resolve => setTimeout(resolve, 1000));

            checkLongRunStability();

            log('ğŸ‰ å…¨é¢æ€§èƒ½æ£€æŸ¥å®Œæˆï¼', 'success');
        }

        // ç³»ç»Ÿæ€§èƒ½ä¼˜åŒ–
        async function optimizeSystemPerformance() {
            log('âš¡ å¼€å§‹ç³»ç»Ÿæ€§èƒ½ä¼˜åŒ–...', 'info');

            optimizeLoadSpeed();
            await new Promise(resolve => setTimeout(resolve, 1200));

            optimizeFirstPaint();
            await new Promise(resolve => setTimeout(resolve, 1000));

            optimizeMemoryUsage();
            await new Promise(resolve => setTimeout(resolve, 1200));

            optimizeGarbageCollection();
            await new Promise(resolve => setTimeout(resolve, 1000));

            log('ğŸ‰ ç³»ç»Ÿæ€§èƒ½ä¼˜åŒ–å®Œæˆï¼', 'success');
        }

        // ç”Ÿæˆä¼˜åŒ–æŠ¥å‘Š
        function generateOptimizationReport() {
            log('ğŸ“Š ç”Ÿæˆæ€§èƒ½ä¼˜åŒ–æŠ¥å‘Š...', 'info');

            const report = {
                timestamp: new Date().toISOString(),
                errors: performanceData.errors.length,
                warnings: performanceData.warnings.length,
                networkErrors: performanceData.networkErrors.length,
                memoryUsage: performance.memory ?
                    (performance.memory.usedJSHeapSize / 1024 / 1024).toFixed(2) + 'MB' : 'N/A',
                runningTime: Math.round((performance.now() - performanceData.startTime) / 60000) + 'åˆ†é’Ÿ'
            };

            log('', 'info');
            log('ğŸ“Š ===== iFlytekæ€§èƒ½ä¼˜åŒ–æŠ¥å‘Š =====', 'info');
            log(`æŠ¥å‘Šæ—¶é—´: ${new Date().toLocaleString()}`, 'info');
            log(`JavaScripté”™è¯¯: ${report.errors}`, report.errors === 0 ? 'success' : 'error');
            log(`Vue.jsè­¦å‘Š: ${report.warnings}`, report.warnings === 0 ? 'success' : 'warning');
            log(`ç½‘ç»œé”™è¯¯: ${report.networkErrors}`, report.networkErrors === 0 ? 'success' : 'error');
            log(`å†…å­˜ä½¿ç”¨: ${report.memoryUsage}`, 'info');
            log(`è¿è¡Œæ—¶é—´: ${report.runningTime}`, 'info');
            log('', 'info');

            // æ€§èƒ½è¯„çº§
            const totalIssues = report.errors + report.warnings + report.networkErrors;
            let grade = 'A';
            if (totalIssues > 10) grade = 'D';
            else if (totalIssues > 5) grade = 'C';
            else if (totalIssues > 2) grade = 'B';

            log(`ğŸ† ç³»ç»Ÿæ€§èƒ½è¯„çº§: ${grade}`, grade === 'A' ? 'success' : grade === 'B' ? 'warning' : 'error');

            // ä¼˜åŒ–å»ºè®®
            log('', 'info');
            log('ğŸ’¡ ä¼˜åŒ–å»ºè®®:', 'info');
            if (report.errors > 0) {
                log('â€¢ ä¿®å¤JavaScripté”™è¯¯ä»¥æå‡ç¨³å®šæ€§', 'warning');
            }
            if (report.warnings > 3) {
                log('â€¢ å¤„ç†Vue.jsè­¦å‘Šä»¥æ”¹å–„å¼€å‘ä½“éªŒ', 'warning');
            }
            if (report.networkErrors > 0) {
                log('â€¢ æ£€æŸ¥ç½‘ç»œè¿æ¥å’ŒAPIçŠ¶æ€', 'warning');
            }
            log('â€¢ å®šæœŸæ¸…ç†æµè§ˆå™¨ç¼“å­˜', 'info');
            log('â€¢ ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬çš„æµè§ˆå™¨', 'info');
            log('â€¢ å…³é—­ä¸å¿…è¦çš„æµè§ˆå™¨æ ‡ç­¾é¡µ', 'info');

            // ä¿å­˜æŠ¥å‘Šåˆ°å…¨å±€å˜é‡
            window.iflytekPerformanceReport = report;
            log('ğŸ’¾ æŠ¥å‘Šå·²ä¿å­˜åˆ° window.iflytekPerformanceReport', 'success');
        }

        // é¡µé¢åŠ è½½æ—¶åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            log('ğŸš€ iFlytekæ€§èƒ½å’Œç¨³å®šæ€§ä¼˜åŒ–å·¥å…·å·²å¯åŠ¨', 'info');
            log('ğŸ“Š å¼€å§‹æ”¶é›†åŸºç¡€æ€§èƒ½æ•°æ®...', 'info');

            // åˆå§‹åŒ–æ€§èƒ½ç›‘æ§
            initializePerformanceMonitoring();

            // æ˜¾ç¤ºåŸºç¡€æ€§èƒ½æŒ‡æ ‡
            setTimeout(() => {
                displayBasicMetrics();
            }, 1000);
        });
    </script>
</body>
</html>
