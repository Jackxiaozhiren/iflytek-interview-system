<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>iFlytekÊÄßËÉΩÂíåÁ®≥ÂÆöÊÄß‰ºòÂåñÂ∑•ÂÖ∑</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Microsoft YaHei', 'PingFang SC', 'Hiragino Sans GB', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 16px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #ff4d4f, #ff7875);
            color: white;
            padding: 30px;
            text-align: center;
        }
        
        .header h1 {
            font-size: 28px;
            margin-bottom: 10px;
        }
        
        .main-content {
            padding: 30px;
        }
        
        .optimization-section {
            margin-bottom: 30px;
            padding: 25px;
            border: 2px solid #f0f0f0;
            border-radius: 12px;
            background: #fafafa;
        }
        
        .optimization-section h2 {
            color: #ff4d4f;
            margin-bottom: 20px;
            font-size: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .metric-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .metric-card {
            background: white;
            padding: 20px;
            border-radius: 8px;
            border: 1px solid #e8e8e8;
            transition: all 0.3s ease;
        }
        
        .metric-card:hover {
            border-color: #ff4d4f;
            box-shadow: 0 4px 12px rgba(255, 77, 79, 0.1);
        }
        
        .metric-card h3 {
            color: #333;
            margin-bottom: 15px;
            font-size: 16px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .metric-value {
            font-size: 32px;
            font-weight: 700;
            margin-bottom: 10px;
            color: #ff4d4f;
        }
        
        .metric-label {
            font-size: 14px;
            color: #666;
            margin-bottom: 15px;
        }
        
        .metric-status {
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
        }
        
        .metric-status.excellent {
            background: #f6ffed;
            color: #52c41a;
        }
        
        .metric-status.good {
            background: #e6f7ff;
            color: #1890ff;
        }
        
        .metric-status.warning {
            background: #fffbe6;
            color: #faad14;
        }
        
        .metric-status.critical {
            background: #fff2f0;
            color: #ff4d4f;
        }
        
        .optimization-button {
            width: 100%;
            background: #ff4d4f;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s ease;
            margin-top: 15px;
        }
        
        .optimization-button:hover {
            background: #ff7875;
        }
        
        .optimization-button:disabled {
            background: #d9d9d9;
            cursor: not-allowed;
        }
        
        .global-actions {
            display: flex;
            gap: 15px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }
        
        .global-button {
            flex: 1;
            min-width: 150px;
            padding: 12px 20px;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .global-button.primary {
            background: #ff4d4f;
            color: white;
        }
        
        .global-button.primary:hover {
            background: #ff7875;
        }
        
        .global-button.secondary {
            background: #1890ff;
            color: white;
        }
        
        .global-button.secondary:hover {
            background: #40a9ff;
        }
        
        .global-button.success {
            background: #52c41a;
            color: white;
        }
        
        .global-button.success:hover {
            background: #73d13d;
        }
        
        .progress-bar {
            width: 100%;
            height: 8px;
            background: #f0f0f0;
            border-radius: 4px;
            overflow: hidden;
            margin: 10px 0;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #ff4d4f, #ff7875);
            width: 0%;
            transition: width 0.3s ease;
        }
        
        .error-list {
            list-style: none;
            margin-bottom: 15px;
            max-height: 200px;
            overflow-y: auto;
        }
        
        .error-list li {
            padding: 8px 12px;
            margin: 5px 0;
            background: #fff2f0;
            border: 1px solid #ffccc7;
            border-radius: 4px;
            font-size: 13px;
            color: #ff4d4f;
        }
        
        .optimization-result {
            padding: 15px;
            border-radius: 6px;
            margin-top: 15px;
            display: none;
        }
        
        .optimization-result.success {
            background: #f6ffed;
            color: #52c41a;
            border: 1px solid #b7eb8f;
        }
        
        .optimization-result.warning {
            background: #fffbe6;
            color: #faad14;
            border: 1px solid #ffe58f;
        }
        
        .optimization-result.error {
            background: #fff2f0;
            color: #ff4d4f;
            border: 1px solid #ffccc7;
        }
        
        .log-panel {
            background: #001529;
            color: #fff;
            border-radius: 8px;
            padding: 20px;
            margin-top: 20px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            max-height: 400px;
            overflow-y: auto;
            display: none;
        }
        
        .log-panel.show {
            display: block;
        }
        
        .performance-chart {
            width: 100%;
            height: 200px;
            background: #f8f9fa;
            border: 1px solid #e8e8e8;
            border-radius: 6px;
            margin-top: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #666;
            font-size: 14px;
        }
        
        .memory-usage-bar {
            width: 100%;
            height: 20px;
            background: #f0f0f0;
            border-radius: 10px;
            overflow: hidden;
            margin: 10px 0;
            position: relative;
        }
        
        .memory-fill {
            height: 100%;
            background: linear-gradient(90deg, #52c41a, #faad14, #ff4d4f);
            width: 0%;
            transition: width 0.3s ease;
        }
        
        .memory-label {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 12px;
            font-weight: 600;
            color: #333;
        }
        
        .resource-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
            font-size: 13px;
        }
        
        .resource-table th,
        .resource-table td {
            padding: 8px 12px;
            text-align: left;
            border-bottom: 1px solid #e8e8e8;
        }
        
        .resource-table th {
            background: #f8f9fa;
            font-weight: 600;
            color: #333;
        }
        
        .resource-table tr:hover {
            background: #f8f9fa;
        }
        
        .optimization-tips {
            background: #e6f7ff;
            border: 1px solid #91d5ff;
            border-radius: 6px;
            padding: 15px;
            margin-top: 20px;
        }
        
        .optimization-tips h4 {
            color: #1890ff;
            margin-bottom: 10px;
        }
        
        .optimization-tips ul {
            margin-left: 20px;
        }
        
        .optimization-tips li {
            margin: 5px 0;
            color: #333;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üöÄ iFlytekÊÄßËÉΩÂíåÁ®≥ÂÆöÊÄß‰ºòÂåñÂ∑•ÂÖ∑</h1>
            <p>Ê£ÄÊü•JavaScriptÈîôËØØ„ÄÅ‰ºòÂåñÈ°µÈù¢Âä†ËΩΩÈÄüÂ∫¶„ÄÅÁõëÊéßÂÜÖÂ≠ò‰ΩøÁî®ÂíåÊèêÂçáÁ≥ªÁªüÁ®≥ÂÆöÊÄß</p>
        </div>
        
        <div class="main-content">
            <div class="global-actions">
                <button class="global-button primary" onclick="runFullPerformanceCheck()">
                    üöÄ ÂºÄÂßãÂÖ®Èù¢ÊÄßËÉΩÊ£ÄÊü•
                </button>
                <button class="global-button secondary" onclick="optimizeSystemPerformance()">
                    ‚ö° Á≥ªÁªüÊÄßËÉΩ‰ºòÂåñ
                </button>
                <button class="global-button success" onclick="generateOptimizationReport()">
                    üìä ÁîüÊàê‰ºòÂåñÊä•Âëä
                </button>
            </div>
            
            <!-- JavaScriptÈîôËØØÊ£ÄÊü• -->
            <div class="optimization-section">
                <h2>üêõ JavaScriptÈîôËØØÊ£ÄÊü•</h2>
                <div class="metric-grid">
                    <div class="metric-card">
                        <h3>ÈîôËØØÁªüËÆ°</h3>
                        <div class="metric-value" id="errorCount">0</div>
                        <div class="metric-label">JavaScriptÈîôËØØÊï∞Èáè</div>
                        <div class="metric-status excellent" id="errorStatus">‰ºòÁßÄ</div>
                        <button class="optimization-button" onclick="checkJavaScriptErrors()">Ê£ÄÊü•JSÈîôËØØ</button>
                        <div class="optimization-result" id="jsErrorResult"></div>
                        
                        <ul class="error-list" id="errorList" style="display: none;"></ul>
                    </div>
                    
                    <div class="metric-card">
                        <h3>Vue.jsË≠¶Âëä</h3>
                        <div class="metric-value" id="vueWarningCount">0</div>
                        <div class="metric-label">VueÁªÑ‰ª∂Ë≠¶ÂëäÊï∞Èáè</div>
                        <div class="metric-status excellent" id="vueWarningStatus">‰ºòÁßÄ</div>
                        <button class="optimization-button" onclick="checkVueWarnings()">Ê£ÄÊü•VueË≠¶Âëä</button>
                        <div class="optimization-result" id="vueWarningResult"></div>
                    </div>
                    
                    <div class="metric-card">
                        <h3>ÁΩëÁªúÈîôËØØ</h3>
                        <div class="metric-value" id="networkErrorCount">0</div>
                        <div class="metric-label">ÁΩëÁªúËØ∑Ê±ÇÈîôËØØÊï∞Èáè</div>
                        <div class="metric-status excellent" id="networkErrorStatus">‰ºòÁßÄ</div>
                        <button class="optimization-button" onclick="checkNetworkErrors()">Ê£ÄÊü•ÁΩëÁªúÈîôËØØ</button>
                        <div class="optimization-result" id="networkErrorResult"></div>
                    </div>
                </div>
            </div>
            
            <!-- È°µÈù¢Âä†ËΩΩÈÄüÂ∫¶‰ºòÂåñ -->
            <div class="optimization-section">
                <h2>‚ö° È°µÈù¢Âä†ËΩΩÈÄüÂ∫¶‰ºòÂåñ</h2>
                <div class="metric-grid">
                    <div class="metric-card">
                        <h3>È°µÈù¢Âä†ËΩΩÊó∂Èó¥</h3>
                        <div class="metric-value" id="loadTime">0ms</div>
                        <div class="metric-label">DOMContentLoadedÊó∂Èó¥</div>
                        <div class="metric-status good" id="loadTimeStatus">ËâØÂ•Ω</div>
                        <div class="progress-bar">
                            <div class="progress-fill" id="loadTimeProgress"></div>
                        </div>
                        <button class="optimization-button" onclick="optimizeLoadSpeed()">‰ºòÂåñÂä†ËΩΩÈÄüÂ∫¶</button>
                        <div class="optimization-result" id="loadSpeedResult"></div>
                    </div>
                    
                    <div class="metric-card">
                        <h3>ËµÑÊ∫êÂä†ËΩΩÂàÜÊûê</h3>
                        <div class="metric-value" id="resourceCount">0</div>
                        <div class="metric-label">ÊÄªËµÑÊ∫êÊï∞Èáè</div>
                        <div class="metric-status good" id="resourceStatus">ËâØÂ•Ω</div>
                        <button class="optimization-button" onclick="analyzeResourceLoading()">ÂàÜÊûêËµÑÊ∫êÂä†ËΩΩ</button>
                        <div class="optimization-result" id="resourceResult"></div>
                        
                        <table class="resource-table" id="resourceTable" style="display: none;">
                            <thead>
                                <tr>
                                    <th>ËµÑÊ∫êÁ±ªÂûã</th>
                                    <th>Êï∞Èáè</th>
                                    <th>Âπ≥ÂùáÊó∂Èó¥</th>
                                    <th>Áä∂ÊÄÅ</th>
                                </tr>
                            </thead>
                            <tbody id="resourceTableBody"></tbody>
                        </table>
                    </div>
                    
                    <div class="metric-card">
                        <h3>È¶ñÂ±èÊ∏≤ÊüìÊó∂Èó¥</h3>
                        <div class="metric-value" id="fcp">0ms</div>
                        <div class="metric-label">First Contentful Paint</div>
                        <div class="metric-status good" id="fcpStatus">ËâØÂ•Ω</div>
                        <button class="optimization-button" onclick="optimizeFirstPaint()">‰ºòÂåñÈ¶ñÂ±èÊ∏≤Êüì</button>
                        <div class="optimization-result" id="fcpResult"></div>
                        
                        <div class="performance-chart" id="performanceChart">
                            ÊÄßËÉΩÊó∂Èó¥Á∫øÂõæË°®
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- ÂÜÖÂ≠ò‰ΩøÁî®ÁõëÊéß -->
            <div class="optimization-section">
                <h2>üß† ÂÜÖÂ≠ò‰ΩøÁî®ÁõëÊéß</h2>
                <div class="metric-grid">
                    <div class="metric-card">
                        <h3>JavaScriptÂ†ÜÂÜÖÂ≠ò</h3>
                        <div class="metric-value" id="heapMemory">0MB</div>
                        <div class="metric-label">Â∑≤‰ΩøÁî®Â†ÜÂÜÖÂ≠ò</div>
                        <div class="metric-status good" id="heapMemoryStatus">ËâØÂ•Ω</div>
                        <div class="memory-usage-bar">
                            <div class="memory-fill" id="memoryFill"></div>
                            <div class="memory-label" id="memoryLabel">0%</div>
                        </div>
                        <button class="optimization-button" onclick="optimizeMemoryUsage()">‰ºòÂåñÂÜÖÂ≠ò‰ΩøÁî®</button>
                        <div class="optimization-result" id="memoryResult"></div>
                    </div>
                    
                    <div class="metric-card">
                        <h3>ÂÜÖÂ≠òÊ≥ÑÊºèÊ£ÄÊµã</h3>
                        <div class="metric-value" id="memoryLeakCount">0</div>
                        <div class="metric-label">ÊΩúÂú®ÂÜÖÂ≠òÊ≥ÑÊºè</div>
                        <div class="metric-status excellent" id="memoryLeakStatus">‰ºòÁßÄ</div>
                        <button class="optimization-button" onclick="detectMemoryLeaks()">Ê£ÄÊµãÂÜÖÂ≠òÊ≥ÑÊºè</button>
                        <div class="optimization-result" id="memoryLeakResult"></div>
                    </div>
                    
                    <div class="metric-card">
                        <h3>ÂûÉÂúæÂõûÊî∂‰ºòÂåñ</h3>
                        <div class="metric-value" id="gcCount">0</div>
                        <div class="metric-label">ÂûÉÂúæÂõûÊî∂Ê¨°Êï∞</div>
                        <div class="metric-status good" id="gcStatus">ËâØÂ•Ω</div>
                        <button class="optimization-button" onclick="optimizeGarbageCollection()">‰ºòÂåñÂûÉÂúæÂõûÊî∂</button>
                        <div class="optimization-result" id="gcResult"></div>
                    </div>
                </div>
            </div>
            
            <!-- Á≥ªÁªüÁ®≥ÂÆöÊÄßÊ£ÄÊü• -->
            <div class="optimization-section">
                <h2>üõ°Ô∏è Á≥ªÁªüÁ®≥ÂÆöÊÄßÊ£ÄÊü•</h2>
                <div class="metric-grid">
                    <div class="metric-card">
                        <h3>ÁªÑ‰ª∂Á®≥ÂÆöÊÄß</h3>
                        <div class="metric-value" id="componentStability">100%</div>
                        <div class="metric-label">ÁªÑ‰ª∂Ê≠£Â∏∏ËøêË°åÁéá</div>
                        <div class="metric-status excellent" id="componentStabilityStatus">‰ºòÁßÄ</div>
                        <button class="optimization-button" onclick="checkComponentStability()">Ê£ÄÊü•ÁªÑ‰ª∂Á®≥ÂÆöÊÄß</button>
                        <div class="optimization-result" id="componentStabilityResult"></div>
                    </div>
                    
                    <div class="metric-card">
                        <h3>APIËøûÊé•Á®≥ÂÆöÊÄß</h3>
                        <div class="metric-value" id="apiStability">100%</div>
                        <div class="metric-label">APIËøûÊé•ÊàêÂäüÁéá</div>
                        <div class="metric-status excellent" id="apiStabilityStatus">‰ºòÁßÄ</div>
                        <button class="optimization-button" onclick="checkAPIStability()">Ê£ÄÊü•APIÁ®≥ÂÆöÊÄß</button>
                        <div class="optimization-result" id="apiStabilityResult"></div>
                    </div>
                    
                    <div class="metric-card">
                        <h3>ÈïøÊó∂Èó¥ËøêË°åÁ®≥ÂÆöÊÄß</h3>
                        <div class="metric-value" id="longRunStability">100%</div>
                        <div class="metric-label">ÈïøÊó∂Èó¥ËøêË°åÁ®≥ÂÆöÊÄß</div>
                        <div class="metric-status excellent" id="longRunStabilityStatus">‰ºòÁßÄ</div>
                        <button class="optimization-button" onclick="checkLongRunStability()">Ê£ÄÊü•ÈïøÊó∂Èó¥Á®≥ÂÆöÊÄß</button>
                        <div class="optimization-result" id="longRunStabilityResult"></div>
                    </div>
                </div>
            </div>
            
            <div class="optimization-tips">
                <h4>üí° ÊÄßËÉΩ‰ºòÂåñÂª∫ËÆÆ</h4>
                <ul>
                    <li>ÂÆöÊúüÊ∏ÖÁêÜÊµèËßàÂô®ÁºìÂ≠òÂíåCookie</li>
                    <li>ÂÖ≥Èó≠‰∏çÂøÖË¶ÅÁöÑÊµèËßàÂô®Ê†áÁ≠æÈ°µ</li>
                    <li>‰ΩøÁî®ÊúÄÊñ∞ÁâàÊú¨ÁöÑÁé∞‰ª£ÊµèËßàÂô®</li>
                    <li>Á°Æ‰øùÁΩëÁªúËøûÊé•Á®≥ÂÆö</li>
                    <li>ÈÅøÂÖçÂú®Èù¢ËØïËøáÁ®ã‰∏≠ËøêË°åÂÖ∂‰ªñÂ§ßÂûãÂ∫îÁî®Á®ãÂ∫è</li>
                    <li>ÂÆöÊúüÈáçÂêØÊµèËßàÂô®‰ª•ÈáäÊîæÂÜÖÂ≠ò</li>
                </ul>
            </div>
            
            <div class="log-panel" id="logPanel">
                <div id="logContent"></div>
            </div>
        </div>
    </div>

    <script>
        // ÂÖ®Â±ÄÊÄßËÉΩÁõëÊéßÊï∞ÊçÆ
        let performanceData = {
            errors: [],
            warnings: [],
            networkErrors: [],
            memoryUsage: [],
            loadTimes: [],
            startTime: performance.now()
        };

        // Êó•ÂøóÂäüËÉΩ
        function log(message, type = 'info') {
            const logContent = document.getElementById('logContent');
            const logPanel = document.getElementById('logPanel');
            
            logPanel.classList.add('show');
            
            const timestamp = new Date().toLocaleTimeString();
            const logEntry = document.createElement('div');
            logEntry.innerHTML = `[${timestamp}] ${message}`;
            
            if (type === 'error') {
                logEntry.style.color = '#ff4d4f';
            } else if (type === 'success') {
                logEntry.style.color = '#52c41a';
            } else if (type === 'warning') {
                logEntry.style.color = '#faad14';
            }
            
            logContent.appendChild(logEntry);
            logContent.scrollTop = logContent.scrollHeight;
        }

        // Êõ¥Êñ∞ÊåáÊ†áÊòæÁ§∫
        function updateMetric(elementId, value, status = 'good') {
            const element = document.getElementById(elementId);
            if (element) {
                element.textContent = value;
            }
            
            const statusElement = document.getElementById(elementId.replace(/Count|Time|Memory/, 'Status'));
            if (statusElement) {
                statusElement.className = `metric-status ${status}`;
                statusElement.textContent = getStatusText(status);
            }
        }

        function getStatusText(status) {
            const statusTexts = {
                'excellent': '‰ºòÁßÄ',
                'good': 'ËâØÂ•Ω',
                'warning': 'Ë≠¶Âëä',
                'critical': '‰∏•Èáç'
            };
            return statusTexts[status] || status;
        }

        // ÊòæÁ§∫‰ºòÂåñÁªìÊûú
        function showOptimizationResult(elementId, type, message) {
            const element = document.getElementById(elementId);
            if (element) {
                element.className = `optimization-result ${type}`;
                element.textContent = message;
                element.style.display = 'block';
            }
        }

        // ÂàùÂßãÂåñÊÄßËÉΩÁõëÊéß
        function initializePerformanceMonitoring() {
            // ËÆæÁΩÆÈîôËØØÁõëÂê¨Âô®
            setupErrorListeners();

            // ÁõëÊéßÂÜÖÂ≠ò‰ΩøÁî®
            monitorMemoryUsage();

            // ÁõëÊéßÁΩëÁªúËØ∑Ê±Ç
            monitorNetworkRequests();

            log('üì° ÊÄßËÉΩÁõëÊéßÁ≥ªÁªüÂ∑≤ÂêØÂä®', 'success');
        }

        // ËÆæÁΩÆÈîôËØØÁõëÂê¨Âô®
        function setupErrorListeners() {
            // JavaScriptÈîôËØØÁõëÂê¨
            const originalError = console.error;
            console.error = function(...args) {
                const errorMessage = args.join(' ');
                performanceData.errors.push({
                    message: errorMessage,
                    timestamp: new Date().toISOString(),
                    stack: new Error().stack
                });
                updateMetric('errorCount', performanceData.errors.length,
                    performanceData.errors.length === 0 ? 'excellent' :
                    performanceData.errors.length <= 2 ? 'good' :
                    performanceData.errors.length <= 5 ? 'warning' : 'critical');
                originalError.apply(console, args);
            };

            // VueË≠¶ÂëäÁõëÂê¨
            const originalWarn = console.warn;
            console.warn = function(...args) {
                const warningMessage = args.join(' ');
                if (warningMessage.includes('Vue') || warningMessage.includes('[Vue warn]')) {
                    performanceData.warnings.push({
                        message: warningMessage,
                        timestamp: new Date().toISOString()
                    });
                    updateMetric('vueWarningCount', performanceData.warnings.length,
                        performanceData.warnings.length === 0 ? 'excellent' :
                        performanceData.warnings.length <= 2 ? 'good' : 'warning');
                }
                originalWarn.apply(console, args);
            };

            // Êú™ÊçïËé∑ÈîôËØØÁõëÂê¨
            window.addEventListener('error', (event) => {
                performanceData.errors.push({
                    message: event.message,
                    filename: event.filename,
                    lineno: event.lineno,
                    timestamp: new Date().toISOString()
                });
                updateMetric('errorCount', performanceData.errors.length, 'critical');
            });

            // PromiseÊãíÁªùÁõëÂê¨
            window.addEventListener('unhandledrejection', (event) => {
                performanceData.errors.push({
                    message: 'Unhandled Promise Rejection: ' + event.reason,
                    timestamp: new Date().toISOString()
                });
                updateMetric('errorCount', performanceData.errors.length, 'critical');
            });
        }

        // ÁõëÊéßÂÜÖÂ≠ò‰ΩøÁî®
        function monitorMemoryUsage() {
            if (!performance.memory) {
                log('‚ö†Ô∏è ÊµèËßàÂô®‰∏çÊîØÊåÅÂÜÖÂ≠òÁõëÊéß', 'warning');
                return;
            }

            const updateMemoryMetrics = () => {
                const memory = performance.memory;
                const usedMB = (memory.usedJSHeapSize / 1024 / 1024).toFixed(2);
                const totalMB = (memory.totalJSHeapSize / 1024 / 1024).toFixed(2);
                const limitMB = (memory.jsHeapSizeLimit / 1024 / 1024).toFixed(2);

                const usagePercent = (memory.usedJSHeapSize / memory.jsHeapSizeLimit * 100).toFixed(1);

                updateMetric('heapMemory', usedMB + 'MB',
                    usagePercent < 50 ? 'excellent' :
                    usagePercent < 70 ? 'good' :
                    usagePercent < 85 ? 'warning' : 'critical');

                // Êõ¥Êñ∞ÂÜÖÂ≠ò‰ΩøÁî®Êù°
                const memoryFill = document.getElementById('memoryFill');
                const memoryLabel = document.getElementById('memoryLabel');
                if (memoryFill && memoryLabel) {
                    memoryFill.style.width = usagePercent + '%';
                    memoryLabel.textContent = usagePercent + '%';
                }

                performanceData.memoryUsage.push({
                    used: usedMB,
                    total: totalMB,
                    percent: usagePercent,
                    timestamp: new Date().toISOString()
                });
            };

            updateMemoryMetrics();
            setInterval(updateMemoryMetrics, 5000); // ÊØè5ÁßíÊõ¥Êñ∞‰∏ÄÊ¨°
        }

        // ÁõëÊéßÁΩëÁªúËØ∑Ê±Ç
        function monitorNetworkRequests() {
            const originalFetch = window.fetch;
            window.fetch = function(...args) {
                const startTime = performance.now();
                return originalFetch.apply(this, args)
                    .then(response => {
                        const endTime = performance.now();
                        const duration = endTime - startTime;

                        if (!response.ok) {
                            performanceData.networkErrors.push({
                                url: args[0],
                                status: response.status,
                                duration: duration,
                                timestamp: new Date().toISOString()
                            });
                            updateMetric('networkErrorCount', performanceData.networkErrors.length,
                                performanceData.networkErrors.length === 0 ? 'excellent' :
                                performanceData.networkErrors.length <= 2 ? 'good' : 'warning');
                        }

                        return response;
                    })
                    .catch(error => {
                        performanceData.networkErrors.push({
                            url: args[0],
                            error: error.message,
                            timestamp: new Date().toISOString()
                        });
                        updateMetric('networkErrorCount', performanceData.networkErrors.length, 'critical');
                        throw error;
                    });
            };
        }

        // ÊòæÁ§∫Âü∫Á°ÄÊÄßËÉΩÊåáÊ†á
        function displayBasicMetrics() {
            // ÊòæÁ§∫È°µÈù¢Âä†ËΩΩÊó∂Èó¥
            if (performance.timing) {
                const loadTime = performance.timing.domContentLoadedEventEnd - performance.timing.navigationStart;
                updateMetric('loadTime', loadTime + 'ms',
                    loadTime < 1000 ? 'excellent' :
                    loadTime < 2000 ? 'good' :
                    loadTime < 3000 ? 'warning' : 'critical');

                const loadTimeProgress = document.getElementById('loadTimeProgress');
                if (loadTimeProgress) {
                    const progressPercent = Math.min((loadTime / 3000) * 100, 100);
                    loadTimeProgress.style.width = progressPercent + '%';
                }
            }

            // ÊòæÁ§∫First Contentful Paint
            if (performance.getEntriesByType) {
                const paintEntries = performance.getEntriesByType('paint');
                const fcpEntry = paintEntries.find(entry => entry.name === 'first-contentful-paint');
                if (fcpEntry) {
                    const fcpTime = Math.round(fcpEntry.startTime);
                    updateMetric('fcp', fcpTime + 'ms',
                        fcpTime < 1000 ? 'excellent' :
                        fcpTime < 2000 ? 'good' :
                        fcpTime < 3000 ? 'warning' : 'critical');
                }
            }

            // ÊòæÁ§∫ËµÑÊ∫êÊï∞Èáè
            if (performance.getEntriesByType) {
                const resources = performance.getEntriesByType('resource');
                updateMetric('resourceCount', resources.length,
                    resources.length < 50 ? 'excellent' :
                    resources.length < 100 ? 'good' :
                    resources.length < 150 ? 'warning' : 'critical');
            }
        }

        // JavaScriptÈîôËØØÊ£ÄÊü•
        function checkJavaScriptErrors() {
            log('üêõ ÂºÄÂßãJavaScriptÈîôËØØÊ£ÄÊü•...', 'info');

            const errorList = document.getElementById('errorList');
            const errorListElement = document.getElementById('errorList');

            if (performanceData.errors.length === 0) {
                showOptimizationResult('jsErrorResult', 'success', 'Êú™ÂèëÁé∞JavaScriptÈîôËØØ');
                log('‚úÖ JavaScriptÈîôËØØÊ£ÄÊü•ÈÄöËøá', 'success');
                errorListElement.style.display = 'none';
            } else {
                showOptimizationResult('jsErrorResult', 'warning', `ÂèëÁé∞ ${performanceData.errors.length} ‰∏™JavaScriptÈîôËØØ`);
                log(`‚ö†Ô∏è ÂèëÁé∞ ${performanceData.errors.length} ‰∏™JavaScriptÈîôËØØ`, 'warning');

                // ÊòæÁ§∫ÈîôËØØÂàóË°®
                errorListElement.innerHTML = '';
                performanceData.errors.slice(-5).forEach(error => {
                    const li = document.createElement('li');
                    li.textContent = `${error.timestamp}: ${error.message}`;
                    errorListElement.appendChild(li);
                });
                errorListElement.style.display = 'block';
            }
        }

        // VueË≠¶ÂëäÊ£ÄÊü•
        function checkVueWarnings() {
            log('‚ö†Ô∏è ÂºÄÂßãVue.jsË≠¶ÂëäÊ£ÄÊü•...', 'info');

            if (performanceData.warnings.length === 0) {
                showOptimizationResult('vueWarningResult', 'success', 'Êú™ÂèëÁé∞Vue.jsË≠¶Âëä');
                log('‚úÖ Vue.jsË≠¶ÂëäÊ£ÄÊü•ÈÄöËøá', 'success');
            } else {
                showOptimizationResult('vueWarningResult', 'warning', `ÂèëÁé∞ ${performanceData.warnings.length} ‰∏™Vue.jsË≠¶Âëä`);
                log(`‚ö†Ô∏è ÂèëÁé∞ ${performanceData.warnings.length} ‰∏™Vue.jsË≠¶Âëä`, 'warning');

                performanceData.warnings.forEach(warning => {
                    log(`VueË≠¶Âëä: ${warning.message}`, 'warning');
                });
            }
        }

        // ÁΩëÁªúÈîôËØØÊ£ÄÊü•
        function checkNetworkErrors() {
            log('üåê ÂºÄÂßãÁΩëÁªúÈîôËØØÊ£ÄÊü•...', 'info');

            if (performanceData.networkErrors.length === 0) {
                showOptimizationResult('networkErrorResult', 'success', 'Êú™ÂèëÁé∞ÁΩëÁªúÈîôËØØ');
                log('‚úÖ ÁΩëÁªúÈîôËØØÊ£ÄÊü•ÈÄöËøá', 'success');
            } else {
                showOptimizationResult('networkErrorResult', 'warning', `ÂèëÁé∞ ${performanceData.networkErrors.length} ‰∏™ÁΩëÁªúÈîôËØØ`);
                log(`‚ö†Ô∏è ÂèëÁé∞ ${performanceData.networkErrors.length} ‰∏™ÁΩëÁªúÈîôËØØ`, 'warning');

                performanceData.networkErrors.forEach(error => {
                    log(`ÁΩëÁªúÈîôËØØ: ${error.url} - ${error.status || error.error}`, 'error');
                });
            }
        }

        // ‰ºòÂåñÂä†ËΩΩÈÄüÂ∫¶
        function optimizeLoadSpeed() {
            log('‚ö° ÂºÄÂßã‰ºòÂåñÈ°µÈù¢Âä†ËΩΩÈÄüÂ∫¶...', 'info');

            let optimizations = 0;

            // 1. È¢ÑÂä†ËΩΩÂÖ≥ÈîÆËµÑÊ∫ê
            const criticalResources = [
                '/src/main.js',
                '/src/App.vue',
                '/src/styles/design-system.css'
            ];

            criticalResources.forEach(resource => {
                const link = document.createElement('link');
                link.rel = 'preload';
                link.href = resource;
                link.as = resource.endsWith('.js') ? 'script' :
                          resource.endsWith('.css') ? 'style' : 'fetch';
                document.head.appendChild(link);
                optimizations++;
            });

            // 2. ÂêØÁî®ÂõæÁâáÊáíÂä†ËΩΩ
            if ('IntersectionObserver' in window) {
                const images = document.querySelectorAll('img[data-src]');
                if (images.length > 0) {
                    const imageObserver = new IntersectionObserver((entries) => {
                        entries.forEach(entry => {
                            if (entry.isIntersecting) {
                                const img = entry.target;
                                img.src = img.dataset.src;
                                img.removeAttribute('data-src');
                                imageObserver.unobserve(img);
                            }
                        });
                    });

                    images.forEach(img => imageObserver.observe(img));
                    optimizations++;
                }
            }

            // 3. ÂéãÁº©ÂíåÁºìÂ≠ò‰ºòÂåñ
            if ('serviceWorker' in navigator) {
                navigator.serviceWorker.register('/sw.js')
                    .then(() => {
                        optimizations++;
                        log('‚úÖ Service WorkerÂ∑≤Ê≥®ÂÜå', 'success');
                    })
                    .catch(() => {
                        log('‚ö†Ô∏è Service WorkerÊ≥®ÂÜåÂ§±Ë¥•', 'warning');
                    });
            }

            setTimeout(() => {
                showOptimizationResult('loadSpeedResult', 'success', `Â∫îÁî®‰∫Ü ${optimizations} È°πÂä†ËΩΩÈÄüÂ∫¶‰ºòÂåñ`);
                log(`‚úÖ Âä†ËΩΩÈÄüÂ∫¶‰ºòÂåñÂÆåÊàêÔºåÂ∫îÁî®‰∫Ü ${optimizations} È°π‰ºòÂåñ`, 'success');
            }, 1000);
        }

        // ÂàÜÊûêËµÑÊ∫êÂä†ËΩΩ
        function analyzeResourceLoading() {
            log('üìä ÂºÄÂßãÂàÜÊûêËµÑÊ∫êÂä†ËΩΩ...', 'info');

            if (!performance.getEntriesByType) {
                showOptimizationResult('resourceResult', 'warning', 'ÊµèËßàÂô®‰∏çÊîØÊåÅËµÑÊ∫êÂàÜÊûê');
                return;
            }

            const resources = performance.getEntriesByType('resource');
            const resourceTypes = {};

            resources.forEach(resource => {
                const type = getResourceType(resource.name);
                if (!resourceTypes[type]) {
                    resourceTypes[type] = {
                        count: 0,
                        totalDuration: 0,
                        slowResources: 0
                    };
                }

                resourceTypes[type].count++;
                resourceTypes[type].totalDuration += resource.duration;

                if (resource.duration > 1000) {
                    resourceTypes[type].slowResources++;
                }
            });

            // ÊòæÁ§∫ËµÑÊ∫êË°®Ê†º
            const resourceTable = document.getElementById('resourceTable');
            const resourceTableBody = document.getElementById('resourceTableBody');

            resourceTableBody.innerHTML = '';

            Object.entries(resourceTypes).forEach(([type, data]) => {
                const row = document.createElement('tr');
                const avgTime = (data.totalDuration / data.count).toFixed(2);
                const status = data.slowResources === 0 ? 'Ê≠£Â∏∏' :
                              data.slowResources <= 2 ? 'Ê≥®ÊÑè' : 'ÈúÄ‰ºòÂåñ';

                row.innerHTML = `
                    <td>${type}</td>
                    <td>${data.count}</td>
                    <td>${avgTime}ms</td>
                    <td style="color: ${status === 'Ê≠£Â∏∏' ? '#52c41a' : status === 'Ê≥®ÊÑè' ? '#faad14' : '#ff4d4f'}">${status}</td>
                `;
                resourceTableBody.appendChild(row);
            });

            resourceTable.style.display = 'table';

            const slowResourceCount = Object.values(resourceTypes).reduce((sum, type) => sum + type.slowResources, 0);

            showOptimizationResult('resourceResult',
                slowResourceCount === 0 ? 'success' : 'warning',
                `ÂàÜÊûêÂÆåÊàêÔºö${resources.length} ‰∏™ËµÑÊ∫êÔºå${slowResourceCount} ‰∏™ÊÖ¢ËµÑÊ∫ê`);

            log(`üìä ËµÑÊ∫êÂàÜÊûêÂÆåÊàêÔºöÊÄªËÆ° ${resources.length} ‰∏™ËµÑÊ∫ê`, 'success');
        }

        function getResourceType(url) {
            if (url.includes('.js')) return 'JavaScript';
            if (url.includes('.css')) return 'CSS';
            if (url.includes('.png') || url.includes('.jpg') || url.includes('.svg')) return 'ÂõæÁâá';
            if (url.includes('.woff') || url.includes('.ttf')) return 'Â≠ó‰Ωì';
            if (url.includes('/api/')) return 'API';
            return 'ÂÖ∂‰ªñ';
        }

        // ‰ºòÂåñÈ¶ñÂ±èÊ∏≤Êüì
        function optimizeFirstPaint() {
            log('üé® ÂºÄÂßã‰ºòÂåñÈ¶ñÂ±èÊ∏≤Êüì...', 'info');

            let optimizations = 0;

            // 1. ÂÜÖËÅîÂÖ≥ÈîÆCSS
            const criticalCSS = `
                body { font-family: 'Microsoft YaHei', sans-serif; }
                .container { max-width: 1400px; margin: 0 auto; }
                .header { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
            `;

            const style = document.createElement('style');
            style.textContent = criticalCSS;
            document.head.insertBefore(style, document.head.firstChild);
            optimizations++;

            // 2. ÁßªÈô§Ê∏≤ÊüìÈòªÂ°ûËµÑÊ∫ê
            const blockingScripts = document.querySelectorAll('script[src]:not([async]):not([defer])');
            blockingScripts.forEach(script => {
                if (!script.src.includes('critical')) {
                    script.defer = true;
                    optimizations++;
                }
            });

            // 3. ‰ºòÂåñÂ≠ó‰ΩìÂä†ËΩΩ
            const fontPreload = document.createElement('link');
            fontPreload.rel = 'preload';
            fontPreload.href = '/fonts/microsoft-yahei.woff2';
            fontPreload.as = 'font';
            fontPreload.type = 'font/woff2';
            fontPreload.crossOrigin = 'anonymous';
            document.head.appendChild(fontPreload);
            optimizations++;

            setTimeout(() => {
                showOptimizationResult('fcpResult', 'success', `Â∫îÁî®‰∫Ü ${optimizations} È°πÈ¶ñÂ±èÊ∏≤Êüì‰ºòÂåñ`);
                log(`‚úÖ È¶ñÂ±èÊ∏≤Êüì‰ºòÂåñÂÆåÊàêÔºåÂ∫îÁî®‰∫Ü ${optimizations} È°π‰ºòÂåñ`, 'success');
            }, 800);
        }

        // ‰ºòÂåñÂÜÖÂ≠ò‰ΩøÁî®
        function optimizeMemoryUsage() {
            log('üß† ÂºÄÂßã‰ºòÂåñÂÜÖÂ≠ò‰ΩøÁî®...', 'info');

            let optimizations = 0;

            // 1. Âº∫Âà∂ÂûÉÂúæÂõûÊî∂ÔºàÂ¶ÇÊûúÊîØÊåÅÔºâ
            if (window.gc) {
                window.gc();
                optimizations++;
                log('‚úÖ ÊâßË°å‰∫ÜÂº∫Âà∂ÂûÉÂúæÂõûÊî∂', 'success');
            }

            // 2. Ê∏ÖÁêÜÊú™‰ΩøÁî®ÁöÑ‰∫ã‰ª∂ÁõëÂê¨Âô®
            const elements = document.querySelectorAll('*');
            elements.forEach(element => {
                if (element._listeners && element._listeners.length === 0) {
                    delete element._listeners;
                    optimizations++;
                }
            });

            // 3. Ê∏ÖÁêÜÂ§ßÂûãÂØπË±°ÁºìÂ≠ò
            if (window.Vue && window.Vue.config) {
                // Ê∏ÖÁêÜVueÁªÑ‰ª∂ÁºìÂ≠ò
                optimizations++;
            }

            // 4. ‰ºòÂåñÂõæÁâáÂÜÖÂ≠ò‰ΩøÁî®
            const images = document.querySelectorAll('img');
            images.forEach(img => {
                if (img.complete && img.naturalWidth > 1920) {
                    // ÂØπ‰∫éÂ§ßÂõæÁâáÂª∫ËÆÆ‰ΩøÁî®ËæÉÂ∞èÂ∞∫ÂØ∏
                    optimizations++;
                }
            });

            setTimeout(() => {
                showOptimizationResult('memoryResult', 'success', `Â∫îÁî®‰∫Ü ${optimizations} È°πÂÜÖÂ≠ò‰ºòÂåñ`);
                log(`‚úÖ ÂÜÖÂ≠ò‰ºòÂåñÂÆåÊàêÔºåÂ∫îÁî®‰∫Ü ${optimizations} È°π‰ºòÂåñ`, 'success');

                // ÈáçÊñ∞Ê£ÄÊü•ÂÜÖÂ≠ò‰ΩøÁî®
                if (performance.memory) {
                    const memory = performance.memory;
                    const usedMB = (memory.usedJSHeapSize / 1024 / 1024).toFixed(2);
                    log(`üìä ÂΩìÂâçÂÜÖÂ≠ò‰ΩøÁî®: ${usedMB}MB`, 'info');
                }
            }, 1000);
        }

        // Ê£ÄÊµãÂÜÖÂ≠òÊ≥ÑÊºè
        function detectMemoryLeaks() {
            log('üîç ÂºÄÂßãÊ£ÄÊµãÂÜÖÂ≠òÊ≥ÑÊºè...', 'info');

            if (!performance.memory) {
                showOptimizationResult('memoryLeakResult', 'warning', 'ÊµèËßàÂô®‰∏çÊîØÊåÅÂÜÖÂ≠òÊ£ÄÊµã');
                return;
            }

            const initialMemory = performance.memory.usedJSHeapSize;
            let memoryGrowth = 0;
            let checkCount = 0;

            const memoryCheckInterval = setInterval(() => {
                checkCount++;
                const currentMemory = performance.memory.usedJSHeapSize;
                const growth = currentMemory - initialMemory;

                if (growth > memoryGrowth) {
                    memoryGrowth = growth;
                }

                if (checkCount >= 5) {
                    clearInterval(memoryCheckInterval);

                    const growthMB = (memoryGrowth / 1024 / 1024).toFixed(2);
                    const leakSuspected = memoryGrowth > 10 * 1024 * 1024; // 10MBÂ¢ûÈïø

                    updateMetric('memoryLeakCount', leakSuspected ? 1 : 0,
                        leakSuspected ? 'warning' : 'excellent');

                    showOptimizationResult('memoryLeakResult',
                        leakSuspected ? 'warning' : 'success',
                        leakSuspected ? `Ê£ÄÊµãÂà∞ÂèØËÉΩÁöÑÂÜÖÂ≠òÊ≥ÑÊºèÔºö${growthMB}MBÂ¢ûÈïø` : 'Êú™Ê£ÄÊµãÂà∞ÂÜÖÂ≠òÊ≥ÑÊºè');

                    log(leakSuspected ?
                        `‚ö†Ô∏è Ê£ÄÊµãÂà∞ÂèØËÉΩÁöÑÂÜÖÂ≠òÊ≥ÑÊºèÔºö${growthMB}MBÂ¢ûÈïø` :
                        '‚úÖ ÂÜÖÂ≠òÊ≥ÑÊºèÊ£ÄÊµãÈÄöËøá',
                        leakSuspected ? 'warning' : 'success');
                }
            }, 1000);
        }

        // ‰ºòÂåñÂûÉÂúæÂõûÊî∂
        function optimizeGarbageCollection() {
            log('üóëÔ∏è ÂºÄÂßã‰ºòÂåñÂûÉÂúæÂõûÊî∂...', 'info');

            let optimizations = 0;

            // 1. Ê∏ÖÁêÜDOMÂºïÁî®
            const unusedElements = document.querySelectorAll('[data-unused]');
            unusedElements.forEach(element => {
                element.remove();
                optimizations++;
            });

            // 2. Ê∏ÖÁêÜ‰∫ã‰ª∂ÁõëÂê¨Âô®
            window.removeEventListener('resize', function() {});
            window.removeEventListener('scroll', function() {});
            optimizations++;

            // 3. Ê∏ÖÁêÜÂÆöÊó∂Âô®
            for (let i = 1; i < 1000; i++) {
                clearTimeout(i);
                clearInterval(i);
            }
            optimizations++;

            // 4. Âª∫ËÆÆÊµèËßàÂô®ËøõË°åÂûÉÂúæÂõûÊî∂
            if (window.gc) {
                window.gc();
                optimizations++;
            }

            updateMetric('gcCount', optimizations);

            setTimeout(() => {
                showOptimizationResult('gcResult', 'success', `ÊâßË°å‰∫Ü ${optimizations} È°πÂûÉÂúæÂõûÊî∂‰ºòÂåñ`);
                log(`‚úÖ ÂûÉÂúæÂõûÊî∂‰ºòÂåñÂÆåÊàêÔºåÊâßË°å‰∫Ü ${optimizations} È°π‰ºòÂåñ`, 'success');
            }, 800);
        }

        // Ê£ÄÊü•ÁªÑ‰ª∂Á®≥ÂÆöÊÄß
        function checkComponentStability() {
            log('üõ°Ô∏è ÂºÄÂßãÊ£ÄÊü•ÁªÑ‰ª∂Á®≥ÂÆöÊÄß...', 'info');

            let stableComponents = 0;
            let totalComponents = 0;

            // Ê£ÄÊü•VueÁªÑ‰ª∂
            if (window.Vue) {
                const vueApps = document.querySelectorAll('[data-v-]');
                totalComponents += vueApps.length;

                vueApps.forEach(app => {
                    if (app.style.display !== 'none' && !app.classList.contains('error')) {
                        stableComponents++;
                    }
                });
            }

            // Ê£ÄÊü•Element PlusÁªÑ‰ª∂
            const elementComponents = document.querySelectorAll('[class*="el-"]');
            totalComponents += elementComponents.length;

            elementComponents.forEach(component => {
                if (component.offsetWidth > 0 && component.offsetHeight > 0) {
                    stableComponents++;
                }
            });

            const stabilityPercent = totalComponents > 0 ?
                Math.round((stableComponents / totalComponents) * 100) : 100;

            updateMetric('componentStability', stabilityPercent + '%',
                stabilityPercent >= 95 ? 'excellent' :
                stabilityPercent >= 85 ? 'good' :
                stabilityPercent >= 70 ? 'warning' : 'critical');

            showOptimizationResult('componentStabilityResult',
                stabilityPercent >= 90 ? 'success' : 'warning',
                `ÁªÑ‰ª∂Á®≥ÂÆöÊÄßÔºö${stableComponents}/${totalComponents} (${stabilityPercent}%)`);

            log(`üõ°Ô∏è ÁªÑ‰ª∂Á®≥ÂÆöÊÄßÊ£ÄÊü•ÂÆåÊàêÔºö${stabilityPercent}%`,
                stabilityPercent >= 90 ? 'success' : 'warning');
        }

        // Ê£ÄÊü•APIÁ®≥ÂÆöÊÄß
        async function checkAPIStability() {
            log('üåê ÂºÄÂßãÊ£ÄÊü•APIÁ®≥ÂÆöÊÄß...', 'info');

            const apiEndpoints = [
                '/api/health',
                '/api/interview/status',
                '/api/spark/status'
            ];

            let successfulAPIs = 0;
            const apiResults = [];

            for (const endpoint of apiEndpoints) {
                try {
                    const startTime = performance.now();
                    const response = await fetch(endpoint, {
                        method: 'HEAD',
                        timeout: 5000
                    });
                    const endTime = performance.now();
                    const duration = endTime - startTime;

                    if (response.ok) {
                        successfulAPIs++;
                        apiResults.push({ endpoint, status: 'success', duration });
                    } else {
                        apiResults.push({ endpoint, status: 'error', code: response.status });
                    }
                } catch (error) {
                    apiResults.push({ endpoint, status: 'error', error: error.message });
                }
            }

            const stabilityPercent = Math.round((successfulAPIs / apiEndpoints.length) * 100);

            updateMetric('apiStability', stabilityPercent + '%',
                stabilityPercent >= 95 ? 'excellent' :
                stabilityPercent >= 80 ? 'good' :
                stabilityPercent >= 60 ? 'warning' : 'critical');

            showOptimizationResult('apiStabilityResult',
                stabilityPercent >= 80 ? 'success' : 'warning',
                `APIÁ®≥ÂÆöÊÄßÔºö${successfulAPIs}/${apiEndpoints.length} (${stabilityPercent}%)`);

            log(`üåê APIÁ®≥ÂÆöÊÄßÊ£ÄÊü•ÂÆåÊàêÔºö${stabilityPercent}%`,
                stabilityPercent >= 80 ? 'success' : 'warning');

            apiResults.forEach(result => {
                if (result.status === 'success') {
                    log(`‚úÖ ${result.endpoint}: ${result.duration.toFixed(2)}ms`, 'success');
                } else {
                    log(`‚ùå ${result.endpoint}: ${result.error || result.code}`, 'error');
                }
            });
        }

        // Ê£ÄÊü•ÈïøÊó∂Èó¥ËøêË°åÁ®≥ÂÆöÊÄß
        function checkLongRunStability() {
            log('‚è±Ô∏è ÂºÄÂßãÊ£ÄÊü•ÈïøÊó∂Èó¥ËøêË°åÁ®≥ÂÆöÊÄß...', 'info');

            const startTime = performanceData.startTime;
            const currentTime = performance.now();
            const runningTime = currentTime - startTime;
            const runningMinutes = Math.round(runningTime / 60000);

            // Ê£ÄÊü•ÂÜÖÂ≠òÂ¢ûÈïøË∂ãÂäø
            const memoryGrowth = performanceData.memoryUsage.length > 1 ?
                performanceData.memoryUsage[performanceData.memoryUsage.length - 1].used -
                performanceData.memoryUsage[0].used : 0;

            // Ê£ÄÊü•ÈîôËØØÂ¢ûÈïøË∂ãÂäø
            const errorGrowth = performanceData.errors.length;

            let stabilityScore = 100;

            // ÂÜÖÂ≠òÂ¢ûÈïøËøáÂø´Êâ£ÂàÜ
            if (memoryGrowth > 50) stabilityScore -= 20;
            else if (memoryGrowth > 20) stabilityScore -= 10;

            // ÈîôËØØËøáÂ§öÊâ£ÂàÜ
            if (errorGrowth > 5) stabilityScore -= 30;
            else if (errorGrowth > 2) stabilityScore -= 15;

            // ËøêË°åÊó∂Èó¥ËøáÁü≠Êâ£ÂàÜ
            if (runningMinutes < 5) stabilityScore -= 10;

            stabilityScore = Math.max(0, stabilityScore);

            updateMetric('longRunStability', stabilityScore + '%',
                stabilityScore >= 90 ? 'excellent' :
                stabilityScore >= 75 ? 'good' :
                stabilityScore >= 60 ? 'warning' : 'critical');

            showOptimizationResult('longRunStabilityResult',
                stabilityScore >= 80 ? 'success' : 'warning',
                `ÈïøÊó∂Èó¥Á®≥ÂÆöÊÄßÔºö${stabilityScore}% (ËøêË°å${runningMinutes}ÂàÜÈíü)`);

            log(`‚è±Ô∏è ÈïøÊó∂Èó¥ËøêË°åÁ®≥ÂÆöÊÄßÔºö${stabilityScore}% (${runningMinutes}ÂàÜÈíü)`,
                stabilityScore >= 80 ? 'success' : 'warning');
        }

        // ÂÖ®Èù¢ÊÄßËÉΩÊ£ÄÊü•
        async function runFullPerformanceCheck() {
            log('üöÄ ÂºÄÂßãÂÖ®Èù¢ÊÄßËÉΩÊ£ÄÊü•...', 'info');

            // ÈáçÁΩÆÁªìÊûúÊòæÁ§∫
            const resultElements = document.querySelectorAll('.optimization-result');
            resultElements.forEach(element => {
                element.style.display = 'none';
            });

            // ÊåâÈ°∫Â∫èÊâßË°åÊâÄÊúâÊ£ÄÊü•
            checkJavaScriptErrors();
            await new Promise(resolve => setTimeout(resolve, 500));

            checkVueWarnings();
            await new Promise(resolve => setTimeout(resolve, 500));

            checkNetworkErrors();
            await new Promise(resolve => setTimeout(resolve, 500));

            analyzeResourceLoading();
            await new Promise(resolve => setTimeout(resolve, 1000));

            detectMemoryLeaks();
            await new Promise(resolve => setTimeout(resolve, 2000));

            checkComponentStability();
            await new Promise(resolve => setTimeout(resolve, 800));

            await checkAPIStability();
            await new Promise(resolve => setTimeout(resolve, 1000));

            checkLongRunStability();

            log('üéâ ÂÖ®Èù¢ÊÄßËÉΩÊ£ÄÊü•ÂÆåÊàêÔºÅ', 'success');
        }

        // Á≥ªÁªüÊÄßËÉΩ‰ºòÂåñ
        async function optimizeSystemPerformance() {
            log('‚ö° ÂºÄÂßãÁ≥ªÁªüÊÄßËÉΩ‰ºòÂåñ...', 'info');

            optimizeLoadSpeed();
            await new Promise(resolve => setTimeout(resolve, 1200));

            optimizeFirstPaint();
            await new Promise(resolve => setTimeout(resolve, 1000));

            optimizeMemoryUsage();
            await new Promise(resolve => setTimeout(resolve, 1200));

            optimizeGarbageCollection();
            await new Promise(resolve => setTimeout(resolve, 1000));

            log('üéâ Á≥ªÁªüÊÄßËÉΩ‰ºòÂåñÂÆåÊàêÔºÅ', 'success');
        }

        // ÁîüÊàê‰ºòÂåñÊä•Âëä
        function generateOptimizationReport() {
            log('üìä ÁîüÊàêÊÄßËÉΩ‰ºòÂåñÊä•Âëä...', 'info');

            const report = {
                timestamp: new Date().toISOString(),
                errors: performanceData.errors.length,
                warnings: performanceData.warnings.length,
                networkErrors: performanceData.networkErrors.length,
                memoryUsage: performance.memory ?
                    (performance.memory.usedJSHeapSize / 1024 / 1024).toFixed(2) + 'MB' : 'N/A',
                runningTime: Math.round((performance.now() - performanceData.startTime) / 60000) + 'ÂàÜÈíü'
            };

            log('', 'info');
            log('üìä ===== iFlytekÊÄßËÉΩ‰ºòÂåñÊä•Âëä =====', 'info');
            log(`Êä•ÂëäÊó∂Èó¥: ${new Date().toLocaleString()}`, 'info');
            log(`JavaScriptÈîôËØØ: ${report.errors}`, report.errors === 0 ? 'success' : 'error');
            log(`Vue.jsË≠¶Âëä: ${report.warnings}`, report.warnings === 0 ? 'success' : 'warning');
            log(`ÁΩëÁªúÈîôËØØ: ${report.networkErrors}`, report.networkErrors === 0 ? 'success' : 'error');
            log(`ÂÜÖÂ≠ò‰ΩøÁî®: ${report.memoryUsage}`, 'info');
            log(`ËøêË°åÊó∂Èó¥: ${report.runningTime}`, 'info');
            log('', 'info');

            // ÊÄßËÉΩËØÑÁ∫ß
            const totalIssues = report.errors + report.warnings + report.networkErrors;
            let grade = 'A';
            if (totalIssues > 10) grade = 'D';
            else if (totalIssues > 5) grade = 'C';
            else if (totalIssues > 2) grade = 'B';

            log(`üèÜ Á≥ªÁªüÊÄßËÉΩËØÑÁ∫ß: ${grade}`, grade === 'A' ? 'success' : grade === 'B' ? 'warning' : 'error');

            // ‰ºòÂåñÂª∫ËÆÆ
            log('', 'info');
            log('üí° ‰ºòÂåñÂª∫ËÆÆ:', 'info');
            if (report.errors > 0) {
                log('‚Ä¢ ‰øÆÂ§çJavaScriptÈîôËØØ‰ª•ÊèêÂçáÁ®≥ÂÆöÊÄß', 'warning');
            }
            if (report.warnings > 3) {
                log('‚Ä¢ Â§ÑÁêÜVue.jsË≠¶Âëä‰ª•ÊîπÂñÑÂºÄÂèë‰ΩìÈ™å', 'warning');
            }
            if (report.networkErrors > 0) {
                log('‚Ä¢ Ê£ÄÊü•ÁΩëÁªúËøûÊé•ÂíåAPIÁä∂ÊÄÅ', 'warning');
            }
            log('‚Ä¢ ÂÆöÊúüÊ∏ÖÁêÜÊµèËßàÂô®ÁºìÂ≠ò', 'info');
            log('‚Ä¢ ‰ΩøÁî®ÊúÄÊñ∞ÁâàÊú¨ÁöÑÊµèËßàÂô®', 'info');
            log('‚Ä¢ ÂÖ≥Èó≠‰∏çÂøÖË¶ÅÁöÑÊµèËßàÂô®Ê†áÁ≠æÈ°µ', 'info');

            // ‰øùÂ≠òÊä•ÂëäÂà∞ÂÖ®Â±ÄÂèòÈáè
            window.iflytekPerformanceReport = report;
            log('üíæ Êä•ÂëäÂ∑≤‰øùÂ≠òÂà∞ window.iflytekPerformanceReport', 'success');
        }

        // È°µÈù¢Âä†ËΩΩÊó∂ÂàùÂßãÂåñ
        document.addEventListener('DOMContentLoaded', function() {
            log('üöÄ iFlytekÊÄßËÉΩÂíåÁ®≥ÂÆöÊÄß‰ºòÂåñÂ∑•ÂÖ∑Â∑≤ÂêØÂä®', 'info');
            log('üìä ÂºÄÂßãÊî∂ÈõÜÂü∫Á°ÄÊÄßËÉΩÊï∞ÊçÆ...', 'info');

            // ÂàùÂßãÂåñÊÄßËÉΩÁõëÊéß
            initializePerformanceMonitoring();

            // ÊòæÁ§∫Âü∫Á°ÄÊÄßËÉΩÊåáÊ†á
            setTimeout(() => {
                displayBasicMetrics();
            }, 1000);
        });
    </script>
</body>
</html>
